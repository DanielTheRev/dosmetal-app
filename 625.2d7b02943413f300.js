"use strict";(self.webpackChunkdosmetal_app_frontend=self.webpackChunkdosmetal_app_frontend||[]).push([[625],{7625:(dt,O,p)=>{p.r(O),p.d(O,{PresupuestosModule:()=>lt});var u=p(9808),a=p(2382),g=p(1598),t=p(5e3),d=p(6529),M=p(8726);const b=["item"],Z=["descripcion"];function v(o,i){1&o&&(t.TgZ(0,"td",41),t._uU(1," Precio "),t.qZA())}function x(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"td",50),t.TgZ(1,"input",51,52),t.NdJ("input",function(){t.CHM(e);const r=t.MAs(2),s=t.oxw().index;return t.oxw().InputPrecioChanges(s,r.value)}),t.qZA(),t.qZA()}}function T(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr",42,43),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t.TgZ(5,"div",44,45),t.NdJ("input",function(){const s=t.CHM(e).index,c=t.MAs(6);return t.oxw().setItemDescription(s,c.innerText)}),t.qZA(),t.qZA(),t.YNc(7,x,3,0,"td",46),t.TgZ(8,"td",47),t.TgZ(9,"div",48),t.TgZ(10,"i",49),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().deleteItem(s)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=i.index,n=t.oxw();t.Q6J("id",e)("formGroupName",e),t.xp6(3),t.hij(" ",e+1," "),t.xp6(2),t.Q6J("innerText",n.initValue(e))("contentEditable",!0),t.xp6(2),t.Q6J("ngIf","Abierto"===n.form.controls.TipoPresupuesto.value)}}function w(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",53),t._uU(1," Costo de la obra: "),t.TgZ(2,"input",54,55),t.NdJ("input",function(){t.CHM(e);const r=t.MAs(3);return t.oxw().setTotalPrice(r.value,r)}),t.qZA(),t.qZA()}}const P=function(){return{minimumFractionDigits:2,maximumFractionDigits:2}};let A=(()=>{class o{constructor(e,n,r,s,c){this.PresupuestoStore=e,this.ActivatedRoute=n,this.FormBuilder=r,this.PresupuestoNotification=s,this.Router=c,this.Presupuesto={Cliente:{_id:"",nombre:""},TipoPresupuesto:"",Obra:"",PresupuestoNum:0,fecha_creacion:0,FormaDePago:"",PlazoDeEntrega:"",LugarDeEntrega:"",ValidezDeOferta:"",Nota:"",Items:[],SubTotal:5,IVA21:5,Total:5,Fecha:0,Estado:"",IvaIncluido:""},this.form=this.FormBuilder.group({Obra:[""],LugarDeEntrega:["",a.kI.required],FormaDePago:["",a.kI.required],PlazoDeEntrega:["",a.kI.required],ValidezDeOferta:["",a.kI.required],Items:this.FormBuilder.array([]),Nota:[""],TipoPresupuesto:["",a.kI.required],IvaIncluido:["",a.kI.required]})}ngAfterViewInit(){}ngOnInit(){const e=this.ActivatedRoute.snapshot.params._id;e&&this.PresupuestoStore.Presupuestos$.subscribe({next:r=>{const s=r.find(c=>c._id===e);void 0!==s&&(this.Presupuesto=s,this.form.reset({Obra:s.Obra,LugarDeEntrega:s.LugarDeEntrega,FormaDePago:s.FormaDePago,PlazoDeEntrega:s.PlazoDeEntrega,ValidezDeOferta:s.ValidezDeOferta,Items:[],Nota:s.Nota,TipoPresupuesto:s.TipoPresupuesto,IvaIncluido:s.IvaIncluido}),s.Items.forEach(c=>{this.addItem(c)}))}});const n=JSON.parse(localStorage.getItem("backupPresupuesto"));n&&n._id===e&&setTimeout(()=>{this.Presupuesto=n,this.form.reset({Obra:n.Obra,LugarDeEntrega:n.LugarDeEntrega,FormaDePago:n.FormaDePago,PlazoDeEntrega:n.PlazoDeEntrega,ValidezDeOferta:n.ValidezDeOferta,Items:[...n.Items],Nota:n.Nota,TipoPresupuesto:n.TipoPresupuesto,IvaIncluido:n.IvaIncluido}),this.PresupuestoNotification.requestSuccessful("Copia de seguridad restaurada")},500)}CambiarTipoPresupuesto(e){if(console.log(e),"Cerrado"===e)return this.Presupuesto.Total=0,this.Presupuesto.SubTotal=0,this.Presupuesto.IVA21=0,void this.SaveOnLS("Sub TipoPresupuesto");this.CalculatePrice(this.getItems().value),this.SaveOnLS("Sub TipoPresupuesto")}initValue(e){return void 0!==this.Presupuesto.Items[e]?this.Presupuesto.Items[e].Descripcion:""}setItemDescription(e,n){this.getItems().at(e).get("Descripcion").setValue(n),this.SaveOnLS("Set descripcion")}setTitleObra(e){this.form.controls.Obra.setValue(e)}quitarIva(e){if("Incluido"===e){const n=.21*this.Presupuesto.SubTotal;return this.Presupuesto.Total=this.Presupuesto.SubTotal+n,this.Presupuesto.IVA21=n,void this.SaveOnLS("Quitar iva")}this.Presupuesto.Total-=this.Presupuesto.IVA21,this.Presupuesto.IVA21=0,this.SaveOnLS("Quitar iva")}addItem(e){this.getItems().push(this.FormBuilder.group({Descripcion:[(null==e?void 0:e.Descripcion)||"",a.kI.required],Precio:[(null==e?void 0:e.Precio)||"",a.kI.min(0)]})),setTimeout(()=>{this.ItemList.last.nativeElement.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)}getItems(){return this.form.controls.Items}deleteItem(e){this.getItems().removeAt(e),"Abierto"===this.form.controls.TipoPresupuesto.value&&(this.CalculatePrice(this.getItems().value),"No incluido"===this.form.controls.IvaIncluido.value&&this.quitarIva("No Incluido")),this.SaveOnLS("Delete item")}SaveDocument(){if(this.form.invalid)return console.log(this.form.value),this.PresupuestoNotification.requestError("Formulario invalido");const e=Object.assign(Object.assign({},this.Presupuesto),this.form.value);this.PresupuestoNotification.ConfirmToProducction().then(n=>{if(n.isConfirmed)return e.Estado="Finalizado",void this.PresupuestoStore.ModifyPresupuesto(e).then(r=>{localStorage.removeItem("backupPresupuesto"),this.Router.navigate(["presupuestos","ver",e._id])});e.Estado="En edicion",this.PresupuestoStore.ModifyPresupuesto(e),localStorage.removeItem("backupPresupuesto"),this.Router.navigate(["presupuestos"])})}InputPrecioChanges(e,n){var r;if("Abierto"===this.form.controls.TipoPresupuesto.value){const s=this.transformToValidNumber(n);return null===(r=this.getItems().at(e).get("Precio"))||void 0===r||r.setValue(s.toLocaleString("es-AR")),this.CalculatePrice(this.getItems().value),"No incluido"===this.form.controls.IvaIncluido.value&&this.quitarIva("No incluido"),void this.SaveOnLS("Test")}}setTotalPrice(e,n){const r=.21*this.transformToValidNumber(e);this.Presupuesto.SubTotal=this.transformToValidNumber(e),this.Presupuesto.IVA21=r,this.Presupuesto.Total=this.transformToValidNumber(e)+r,n.value=this.transformToValidNumber(n.value).toLocaleString("es-Ar"),this.SaveOnLS("Setear precio unitario")}CalculatePrice(e){let n=0;e.forEach(s=>{n+=this.transformToValidNumber(s.Precio)});const r=.21*n;this.Presupuesto.SubTotal=n,this.Presupuesto.IVA21=r,this.Presupuesto.Total=n+r,this.SaveOnLS("Calcular precio")}transformToValidNumber(e){if(!e)return 0;const n=e.split("").map(r=>("."===r&&(r=""),","===r&&(r="."),r)).filter(r=>""!==r).join("");return isNaN(Number(n))?0:Number(n)}SaveOnLS(e){localStorage.setItem("backupPresupuesto",JSON.stringify(Object.assign(Object.assign({},this.Presupuesto),this.form.value)))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.R),t.Y36(g.gz),t.Y36(a.qu),t.Y36(M.R),t.Y36(g.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-presupuesto"]],viewQuery:function(e,n){if(1&e&&(t.Gf(b,5),t.Gf(Z,5)),2&e){let r;t.iGM(r=t.CRH())&&(n.ItemList=r),t.iGM(r=t.CRH())&&(n.Itemdescripcion=r)}},decls:87,vars:13,consts:[[1,"client-data"],[1,"client-name-obra"],["contentEditable","true",1,"title",3,"input"],["title",""],[1,"PresupuestoNum"],[1,"wrapper",3,"formGroup"],[1,"obra-data"],[1,"list-group","list-group-horizontal"],[1,"list-group-item","user-select-none"],[1,"input-wrapper"],[1,"form-label"],["type","text","formControlName","LugarDeEntrega",1,"value-editable"],["formControlName","IvaIncluido",1,"value-editable",3,"input"],["iva",""],["value","Incluido"],["value","No incluido"],["formControlName","TipoPresupuesto",1,"value-editable",3,"input"],["tipoPresupuesto",""],["value","Cerrado"],["value","Abierto"],["type","text","formControlName","FormaDePago",1,"value-editable"],["type","text","formControlName","PlazoDeEntrega",1,"value-editable"],["type","text","formControlName","ValidezDeOferta",1,"value-editable"],[1,"items-list"],[1,"table"],["scope","col",2,"width","50px","text-align","center"],["scope","col"],["scope","col","style","width: 114px",4,"ngIf"],["scope","col",2,"width","35px","height","35px"],["formArrayName","Items"],[3,"id","formGroupName",4,"ngFor","ngForOf"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"nota","alert","alert-warning","m-0"],["type","text","formControlName","Nota",1,"value-editable","text-primary"],["nota",""],[1,"count"],[1,"sub-total"],[1,"text-primary"],[1,"IVA"],[1,"total"],["class","set-price",4,"ngIf"],["scope","col",2,"width","114px"],[3,"id","formGroupName"],["item",""],[1,"descripcion",3,"innerText","contentEditable","input"],["descripcion",""],["style","width: 114px",4,"ngIf"],[2,"width","35px","height","50px"],[1,"delete-icon"],[1,"fas","fa-trash-alt","fa-lg",3,"click"],[2,"width","114px"],["type","text","formControlName","Precio",1,"precio",3,"input"],["inputEl",""],[1,"set-price"],["type","text","id","set-price","autocomplete","off",3,"input"],["setPrice",""]],template:function(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"header"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t._uU(3),t.TgZ(4,"div",2,3),t.NdJ("input",function(){t.CHM(r);const c=t.MAs(5);return n.setTitleObra(c.textContent)}),t._uU(6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"span",4),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"form",5),t.TgZ(10,"div",6),t.TgZ(11,"ul",7),t.TgZ(12,"li",8),t.TgZ(13,"div",9),t.TgZ(14,"label",10),t._uU(15," Entrega "),t.qZA(),t._UZ(16,"input",11),t.qZA(),t.qZA(),t.TgZ(17,"li",8),t.TgZ(18,"div",9),t.TgZ(19,"label",10),t._uU(20," IVA "),t.qZA(),t.TgZ(21,"select",12,13),t.NdJ("input",function(){t.CHM(r);const c=t.MAs(22);return n.quitarIva(c.value)}),t.TgZ(23,"option",14),t._uU(24,"INCLUIDO"),t.qZA(),t.TgZ(25,"option",15),t._uU(26,"NO INCLUIDO"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"li",8),t.TgZ(28,"div",9),t.TgZ(29,"label",10),t._uU(30," Tipo "),t.qZA(),t.TgZ(31,"select",16,17),t.NdJ("input",function(){t.CHM(r);const c=t.MAs(32);return n.CambiarTipoPresupuesto(c.value)}),t.TgZ(33,"option",18),t._uU(34,"CERRADO"),t.qZA(),t.TgZ(35,"option",19),t._uU(36,"ABIERTO"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"li",8),t.TgZ(38,"div",9),t.TgZ(39,"label",10),t._uU(40," Forma de pago "),t.qZA(),t._UZ(41,"input",20),t.qZA(),t.qZA(),t.TgZ(42,"li",8),t.TgZ(43,"div",9),t.TgZ(44,"label",10),t._uU(45," Plazo de entrega "),t.qZA(),t._UZ(46,"input",21),t.qZA(),t.qZA(),t.TgZ(47,"li",8),t.TgZ(48,"div",9),t.TgZ(49,"label",10),t._uU(50," Validez Oferta "),t.qZA(),t._UZ(51,"input",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"div",23),t.TgZ(53,"table",24),t.TgZ(54,"thead"),t.TgZ(55,"tr"),t.TgZ(56,"td",25),t._uU(57,"Item"),t.qZA(),t.TgZ(58,"td",26),t._uU(59,"Descripcion"),t.qZA(),t.YNc(60,v,2,0,"td",27),t._UZ(61,"td",28),t.qZA(),t.qZA(),t.TgZ(62,"tbody",29),t.YNc(63,T,11,6,"tr",30),t.qZA(),t.qZA(),t.TgZ(64,"button",31),t.NdJ("click",function(){return n.addItem()}),t._uU(65,"Agregar"),t.qZA(),t.qZA(),t.TgZ(66,"div",32),t._uU(67," Nota: "),t._UZ(68,"textarea",33,34),t.qZA(),t.qZA(),t.TgZ(70,"footer"),t.TgZ(71,"div",35),t.TgZ(72,"div",36),t._uU(73," Subtotal: "),t.TgZ(74,"span",37),t._uU(75),t.qZA(),t.qZA(),t.TgZ(76,"div",38),t._uU(77," IVA 21%: "),t.TgZ(78,"span",37),t._uU(79),t.qZA(),t.qZA(),t.TgZ(80,"div",39),t._uU(81," Total: "),t.TgZ(82,"span",37),t._uU(83),t.qZA(),t.qZA(),t.qZA(),t.YNc(84,w,4,0,"div",40),t.TgZ(85,"button",31),t.NdJ("click",function(){return n.SaveDocument()}),t._uU(86," Guardar "),t.qZA(),t.qZA()}2&e&&(t.xp6(3),t.hij(" ",n.Presupuesto.Cliente.nombre," "),t.xp6(3),t.hij(" ",n.Presupuesto.Obra.trim()||""," "),t.xp6(2),t.hij("Presupuesto Nro: ",n.Presupuesto.PresupuestoNum,""),t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(51),t.Q6J("ngIf","Abierto"===n.form.controls.TipoPresupuesto.value),t.xp6(3),t.Q6J("ngForOf",n.getItems().controls),t.xp6(12),t.hij("$",n.Presupuesto.SubTotal.toLocaleString("es-AR",t.DdM(10,P))," |"),t.xp6(4),t.hij("$",n.Presupuesto.IVA21.toLocaleString("es-AR",t.DdM(11,P))," |"),t.xp6(4),t.hij("$",n.Presupuesto.Total.toLocaleString("es-AR",t.DdM(12,P)),""),t.xp6(1),t.Q6J("ngIf","Cerrado"===n.form.controls.TipoPresupuesto.value))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.EJ,a.YN,a.Kr,u.O5,a.CE,u.sg,a.x0],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:max-content 1fr max-content max-content;width:100%;height:100%;grid-gap:.2rem;gap:.2rem;justify-items:center;overflow-y:auto}header[_ngcontent-%COMP%]{position:relative;display:flex;width:100%}header[_ngcontent-%COMP%]   .client-data[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;flex-wrap:wrap;background:var(--bs-gray-200);padding:.5rem .2rem;line-height:normal}header[_ngcontent-%COMP%]   .client-data[_ngcontent-%COMP%]   .client-name-obra[_ngcontent-%COMP%]{display:flex;font-size:30px;flex-direction:column;align-items:center;justify-content:center;flex-wrap:wrap}header[_ngcontent-%COMP%]   .client-data[_ngcontent-%COMP%]   .client-name-obra[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:inline-block;font-size:18px;color:#fff;background-color:var(--bs-indigo);padding:.2rem .5rem;border-radius:15px;text-transform:uppercase;box-shadow:0 0 5px #333;outline:none}header[_ngcontent-%COMP%]   .PresupuestoNum[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;color:#fff;background-color:var(--bs-blue);padding:.2rem .5rem;border-radius:15px;box-shadow:0 0 5px #333}.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.3rem;overflow-y:auto;align-items:center;justify-content:space-around}.wrapper[_ngcontent-%COMP%]   .obra-data[_ngcontent-%COMP%]{display:flex;width:100%;flex-wrap:wrap;justify-content:center;align-items:center}.wrapper[_ngcontent-%COMP%]   .obra-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{justify-content:center;padding:0!important;flex-wrap:wrap}.wrapper[_ngcontent-%COMP%]   .obra-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]   .obra-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;height:100%;width:100%;flex-direction:column;align-content:center;align-items:center;justify-content:center}.wrapper[_ngcontent-%COMP%]   .obra-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%] > label[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]   .obra-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{margin:0;font-size:12px}.wrapper[_ngcontent-%COMP%]   .obra-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%] > .value-editable[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]   .obra-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%] > .value-editable[_ngcontent-%COMP%]{outline:none;border:none;border-bottom:2px solid var(--bs-indigo);height:20px;font-size:15px;width:180px;text-align:center;color:var(--bs-success)}.wrapper[_ngcontent-%COMP%]   .obra-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%] > .value-editable[_ngcontent-%COMP%]:focus, .wrapper[_ngcontent-%COMP%]   .obra-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%] > .value-editable[_ngcontent-%COMP%]:focus{border-bottom-color:var(--bs-warning);color:var(--bs-warning)}.wrapper[_ngcontent-%COMP%]   .obra-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%] > .value-editable[_ngcontent-%COMP%]:hover:not(.wrapper   .obra-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]    > .value-editable[_ngcontent-%COMP%]:focus, .wrapper[_ngcontent-%COMP%]   .obra-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]    > .value-editable[_ngcontent-%COMP%]:focus), .wrapper[_ngcontent-%COMP%]   .obra-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%] > .value-editable[_ngcontent-%COMP%]:hover:not(.wrapper   .obra-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]    > .value-editable[_ngcontent-%COMP%]:focus, .wrapper[_ngcontent-%COMP%]   .obra-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]    > .value-editable[_ngcontent-%COMP%]:focus){border-bottom-color:var(--bs-warning)}.wrapper[_ngcontent-%COMP%]   .obra-data[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:max-content;padding:0px .2rem!important}.wrapper[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;align-content:center;justify-content:flex-start;overflow-y:auto;width:841px;height:100%}.wrapper[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;max-height:100%}.wrapper[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;background-color:var(--bs-gray-300)}.wrapper[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#fff}.wrapper[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .precio[_ngcontent-%COMP%]{display:flex;width:100%;min-height:100%;font-size:15px;border:2px solid var(--bs-gray-400);border-radius:3px;outline:none;align-items:center;padding:0px .2rem}.wrapper[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]:hover, .wrapper[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .precio[_ngcontent-%COMP%]:hover{border-color:var(--bs-warning)}.wrapper[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]:focus, .wrapper[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .precio[_ngcontent-%COMP%]:focus{border-color:var(--bs-primary)}.wrapper[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .descripcion[_ngcontent-%COMP%]{display:inline-block;min-height:35px!important;padding:0}.wrapper[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .precio[_ngcontent-%COMP%]{min-height:30px;max-height:80px}.wrapper[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;justify-content:center;align-items:center;color:var(--bs-danger)}.wrapper[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%] > button.btn[_ngcontent-%COMP%]{position:sticky;bottom:0px}.wrapper[_ngcontent-%COMP%]   .nota[_ngcontent-%COMP%]{display:flex;width:95%;padding:.2rem;gap:.2rem}.wrapper[_ngcontent-%COMP%]   .nota[_ngcontent-%COMP%]   .value-editable[_ngcontent-%COMP%]{flex-grow:1;outline:none;resize:none;border:none;text-align:justify}.wrapper[_ngcontent-%COMP%]   .nota[_ngcontent-%COMP%]   .value-editable[_ngcontent-%COMP%]:focus{border:2px solir red}footer[_ngcontent-%COMP%]{display:flex;width:100%;padding:.3rem;background-color:var(--bs-gray-200);justify-content:space-between;align-items:center;gap:.2rem}footer[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:.2rem;font-size:16px;border:2px solid var(--bs-warning);border-radius:3px;padding:.2rem}footer[_ngcontent-%COMP%]   .set-price[_ngcontent-%COMP%]{display:flex;border:2px solid var(--bs-blue);padding:.2rem;border-radius:4px}footer[_ngcontent-%COMP%]   .set-price[_ngcontent-%COMP%] > #set-price[_ngcontent-%COMP%]{display:block;border:none;background-color:transparent;flex-grow:1;border-bottom:2px solid var(--bs-gray-600);outline:none}footer[_ngcontent-%COMP%]   .set-price[_ngcontent-%COMP%] > #set-price[_ngcontent-%COMP%]:hover{border-bottom-color:var(--bs-success)}footer[_ngcontent-%COMP%]   .set-price[_ngcontent-%COMP%] > #set-price[_ngcontent-%COMP%]:focus{border-bottom-color:var(--bs-warning)}"]}),o})();var y=p(6468);const q=["item"],h=function(o,i){return{_id:o,nombre:i}};function I(o,i){if(1&o&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",t.WLB(3,h,e._id,e.nombre))("ngValue",t.WLB(6,h,e._id,e.nombre)),t.xp6(1),t.hij(" ",e.nombre," ")}}const N=function(o){return{"d-none":o}},U=function(o){return{"btn-danger":o}};let D=(()=>{class o{constructor(e,n,r,s,c,_){this.FormBuilder=e,this.ClientStore=n,this.PresupuestoStore=r,this.PresupuestoNotifications=s,this.Router=c,this.ActivatedRoute=_,this.title="Nuevo Presupuesto",this.PresupuestoToAdd=void 0,this.Clientes=[],this.countData={SubTotal:0,IVA21:0,Total:0},this.form=this.FormBuilder.group({Cliente:[this.FormBuilder.group({_id:[""],nombre:[""]}),a.kI.required],TipoPresupuesto:["Abierto",a.kI.required],IvaIncluido:["Incluido"],Obra:["",a.kI.required],FormaDePago:["",a.kI.required],PlazoDeEntrega:["",a.kI.required],LugarDeEntrega:["",a.kI.required],ValidezDeOferta:["",a.kI.required],Nota:[""],Items:this.FormBuilder.array([])});const C=this.ActivatedRoute.snapshot.params._id;this.PresupuestoStore.Presupuestos$.subscribe(gt=>{const l=gt.find(m=>m._id===C);void 0!==l&&(console.log(l),this.title="Continuando presupuesto",this.form.setValue({Cliente:l.Cliente,Obra:l.Obra,FormaDePago:l.FormaDePago,PlazoDeEntrega:l.PlazoDeEntrega,LugarDeEntrega:l.LugarDeEntrega,ValidezDeOferta:l.ValidezDeOferta,Nota:l.Nota,Items:[]}),l.Items.forEach(m=>{this.getItems().push(this.FormBuilder.group({Descripcion:[m.Descripcion,a.kI.required],Precio:[m.Precio,a.kI.required]}))}),this.CalculatePrice(l.Items))})}ngOnInit(){this.ClientStore.Clients$.subscribe(e=>{this.Clientes=e})}getItems(){return this.form.controls.Items}addItem(){!this.getItems().valid||(this.getItems().push(this.FormBuilder.group({Descripcion:["",a.kI.required],Precio:["",a.kI.required]})),setTimeout(()=>{this.ItemList.last.nativeElement.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100))}deleteItem(e){this.getItems().removeAt(e,{emitEvent:!0}),this.CalculatePrice(this.getItems().value)}getValue(e){return this.getItems().at(e)}setValue(e,n,r){try{if("precio"===r)return this.getItems().at(e).setValue(Object.assign(Object.assign({},this.getItems().at(e).value),{Precio:n})),void this.CalculatePrice(this.getItems().value);if("descripcion"===r)return void this.getItems().at(e).setValue(Object.assign(Object.assign({},this.getItems().at(e).value),{Descripcion:n}));if("nota"===r)return void this.form.controls.Nota.setValue(n)}catch(s){console.log("hubo un error al actualizar el valor")}}CalculatePrice(e){let n=0;e.forEach(s=>{n+=this.transformToValidNumber(s.Precio)});const r=.21*n;this.countData.SubTotal=n,this.countData.IVA21=r,this.countData.Total=n+r}transformToValidNumber(e){const n=e.split("").map(r=>("."===r&&(r=""),","===r&&(r="."),r)).filter(r=>""!==r).join("");return isNaN(Number(n))?0:Number(n)}Continue(e){"ContinueEditing"!==e?"EndPresupuesto"===e&&this.PresupuestoNotifications.ConfirmToProducction().then(n=>{var r;if(n.isConfirmed){const s=Object.assign(Object.assign(Object.assign({},this.form.value),this.countData),{Fecha:Date.now(),PresupuestoNum:1e3,Estado:"Finalizado"});this.PresupuestoStore.addNewPresupuesto(s).then(c=>{this.Router.navigate(["presupuestos"])})}else this.PresupuestoToAdd.Estado="En edicion",this.PresupuestoToAdd._id=this.ActivatedRoute.snapshot.params._id,console.log(null===(r=this.PresupuestoToAdd)||void 0===r?void 0:r._id),this.PresupuestoStore.ModifyPresupuesto(this.PresupuestoToAdd),this.Router.navigate(["presupuestos"])}):this.PresupuestoToAdd=void 0}validateStringToNumber(e){const n=e.split("").map(r=>("."===r&&(r=""),","===r&&(r="."),r)).filter(r=>""!==r).join("");return isNaN(Number(n))}Save(){if(this.form.valid){console.log("Formulario valido ");const e=Object.assign(Object.assign(Object.assign({},this.form.value),this.countData),{Fecha:Date.now(),PresupuestoNum:0,Estado:"En edicion"});return console.log(e),void this.PresupuestoStore.addNewPresupuesto(e)}console.log("formulario no valido")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(y.i),t.Y36(d.R),t.Y36(M.R),t.Y36(g.F0),t.Y36(g.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-presupuesto"]],viewQuery:function(e,n){if(1&e&&t.Gf(q,5),2&e){let r;t.iGM(r=t.CRH())&&(n.ItemList=r)}},decls:53,vars:11,consts:[[1,"form-container",3,"ngClass"],[3,"formGroup","ngSubmit"],[1,"data"],[1,"inputs"],["for","cliente",1,"form-label"],["formControlName","Cliente",1,"form-select","form-select-sm"],[3,"value","ngValue",4,"ngFor","ngForOf"],["for","TipoPresupuesto",1,"form-label"],["id","TipoPresupuesto","formControlName","TipoPresupuesto",1,"form-select","form-select-sm"],["value","Abierto"],["value","Cerrado"],["for","IvaIncluido",1,"form-label"],["id","IvaIncluido","formControlName","IvaIncluido",1,"form-select","form-select-sm"],["value","Incluido"],["value","No incluido"],["for","obra",1,"form-label"],["type","text","formControlName","Obra",1,"form-control","form-control-sm"],["for","formadepago",1,"form-label"],["type","text","formControlName","FormaDePago",1,"form-control","form-control-sm"],["for","plazodepago",1,"form-label"],["type","text","formControlName","PlazoDeEntrega",1,"form-control","form-control-sm"],["for","lugardeentrega",1,"form-label"],["type","text","formControlName","LugarDeEntrega",1,"form-control","form-control-sm"],["for","validezdeoferta",1,"form-label"],["type","text","formControlName","ValidezDeOferta",1,"form-control","form-control-sm"],["role","alert",1,"nota","alert","alert-warning","mb-0"],["contenteditable","true",3,"textContent","input"],["nota",""],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled","ngClass"],[3,"value","ngValue"]],template:function(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"header"),t._uU(2),t.qZA(),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return n.Save()}),t.TgZ(4,"div",2),t.TgZ(5,"div",3),t.TgZ(6,"label",4),t._uU(7,"Cliente"),t.qZA(),t.TgZ(8,"select",5),t.YNc(9,I,2,9,"option",6),t.qZA(),t.qZA(),t.TgZ(10,"div",3),t.TgZ(11,"label",7),t._uU(12,"Tipo Presupuesto"),t.qZA(),t.TgZ(13,"select",8),t.TgZ(14,"option",9),t._uU(15,"Abierto"),t.qZA(),t.TgZ(16,"option",10),t._uU(17,"Cerrado"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",3),t.TgZ(19,"label",11),t._uU(20,"IVA"),t.qZA(),t.TgZ(21,"select",12),t.TgZ(22,"option",13),t._uU(23,"Incluido"),t.qZA(),t.TgZ(24,"option",14),t._uU(25,"No incluido"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",3),t.TgZ(27,"label",15),t._uU(28,"Obra"),t.qZA(),t._UZ(29,"input",16),t.qZA(),t.TgZ(30,"div",3),t.TgZ(31,"label",17),t._uU(32,"Forma de pago"),t.qZA(),t._UZ(33,"input",18),t.qZA(),t.TgZ(34,"div",3),t.TgZ(35,"label",19),t._uU(36,"Plazo de entrega"),t.qZA(),t._UZ(37,"input",20),t.qZA(),t.TgZ(38,"div",3),t.TgZ(39,"label",21),t._uU(40,"Lugar de entrega"),t.qZA(),t._UZ(41,"input",22),t.qZA(),t.TgZ(42,"div",3),t.TgZ(43,"label",23),t._uU(44,"Validez de Oferta"),t.qZA(),t._UZ(45,"input",24),t.qZA(),t.qZA(),t.TgZ(46,"div",25),t._uU(47," Nota: "),t.TgZ(48,"div",26,27),t.NdJ("input",function(){t.CHM(r);const c=t.MAs(49);return n.setValue(0,c.innerText,"nota")}),t.qZA(),t.qZA(),t.TgZ(50,"footer"),t.TgZ(51,"button",28),t._uU(52," Siguiente "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&e&&(t.Q6J("ngClass",t.VKq(7,N,n.PresupuestoToAdd)),t.xp6(2),t.Oqu(n.title),t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(6),t.Q6J("ngForOf",n.Clientes),t.xp6(39),t.Q6J("textContent",n.form.value.Nota),t.xp6(3),t.Q6J("disabled",n.form.invalid)("ngClass",t.VKq(9,U,n.form.invalid)))},directives:[u.mk,a._Y,a.JL,a.sg,a.EJ,a.JJ,a.u,u.sg,a.YN,a.Kr,a.Fj],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%;flex-direction:column}.form-container[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1fr;grid-template-rows:max-content 1fr;justify-items:center;background:linear-gradient(to bottom,#606c88,#3f4c6b);padding:.5rem;border-radius:10px}.form-container[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]{display:flex;width:100%;padding:.2rem;font-size:30px;font-style:italic;color:#fff}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;width:100%;max-width:700px;height:100%;grid-template-columns:1fr;grid-template-rows:max-content 1fr max-content;overflow:auto;grid-gap:.3rem;gap:.3rem;background-color:#fff;padding:.5rem;border-radius:10px}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:repeat(3,1fr);grid-auto-rows:max-content;padding:.5rem;grid-gap:.2rem;gap:.2rem;border-radius:3px;color:#333;grid-row-gap:1.5rem;row-gap:1.5rem}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .inputs-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;align-items:center;justify-content:space-around;gap:.3rem;flex-direction:column}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .inputs-container[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .nota[_ngcontent-%COMP%]{display:flex;height:114px;grid-column-start:1;grid-column-end:3;justify-content:space-between;align-items:center;padding:.2rem .4rem!important;flex-direction:column;align-self:flex-end}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .nota[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;justify-content:flex-start;border:2px solid var(--bs-gray-400);border-radius:4px;outline:none;padding:.2rem}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .nota[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover{border-color:var(--bs-success)}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .nota[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:focus{border-color:var(--bs-success)}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding:.2rem 0px;border-top:2px solid var(--bs-secondary);grid-column-start:1;grid-column-end:3}"]}),o})();var F=p(5861);const E=function(o){return{"bg-success":o}};function S(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"span",11),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",12),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().goToPresupuesto(s._id)}),t._uU(7),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"span",13),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"td"),t.TgZ(12,"span",14),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"date"),t.qZA(),t.TgZ(17,"td"),t.TgZ(18,"div",15),t._uU(19),t.qZA(),t.qZA(),t.TgZ(20,"td"),t.TgZ(21,"div",16),t.TgZ(22,"i",17),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().addPresupuesto(s._id)}),t.qZA(),t.TgZ(23,"i",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deletePresupuesto(s._id)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=i.$implicit;t.xp6(3),t.hij(" ",e.PresupuestoNum," "),t.xp6(2),t.Oqu(e.Cliente.nombre),t.xp6(2),t.hij(" ",e.Obra," "),t.xp6(3),t.hij(" ",e.TipoPresupuesto," "),t.xp6(3),t.hij(" ",e.IvaIncluido," "),t.xp6(2),t.Oqu(t.xi3(16,8,e.Fecha,"dd-MM-YYYY")),t.xp6(3),t.Q6J("ngClass",t.VKq(11,E,"Finalizado"===e.Estado)),t.xp6(1),t.hij(" ",e.Estado," ")}}let j=(()=>{class o{constructor(e,n){this.presupuestoStore=e,this.Router=n,this.Presupuestos=[],this.PresupuestosFiltered=[],this.presupuestoStore.Presupuestos$.subscribe(r=>{this.Presupuestos=r,this.PresupuestosFiltered=r})}ngOnInit(){}goToPresupuesto(e){this.Router.navigate(["presupuestos","ver",e])}addPresupuesto(e){this.Router.navigate(e?["presupuestos","editar-presupuesto",e]:["presupuestos","crear-presupuesto",""])}findPresupuesto(e){this.PresupuestosFiltered=this.Presupuestos.filter(n=>n.Cliente.nombre.toLowerCase().includes(e)||n.Obra.toLowerCase().includes(e)),e.length<=0&&(this.PresupuestosFiltered=this.Presupuestos)}deletePresupuesto(e){var n=this;return(0,F.Z)(function*(){n.presupuestoStore.deletePresupuesto(e)})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.R),t.Y36(g.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-presupuestos"]],decls:32,vars:1,consts:[[1,"title"],[1,"control-bar"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"input-finder"],[1,"icon"],[1,"fas","fa-search","text-secondary"],["type","text","placeholder","Buscar",1,"form-control","form-control-sm","finder",3,"input"],["term",""],[1,"table-container"],[2,"width","100px"],[4,"ngFor","ngForOf"],[1,"badge","bg-secondary"],[3,"click"],[1,"badge","bg-primary"],[1,"badge","bg-warning","text-dark"],[1,"badge","bg-secondary",3,"ngClass"],[1,"icons"],["title","Editar presupuesto",1,"fas","fa-edit","text-dark",3,"click"],["title","Eliminar presupuesto",1,"fas","fa-trash-alt","text-danger",3,"click"]],template:function(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"header"),t.TgZ(1,"div",0),t._uU(2,"Presupuestos"),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"div",2),t.NdJ("click",function(){return n.addPresupuesto()}),t._uU(5,"Nuevo presupuesto"),t.qZA(),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t._UZ(8,"i",5),t.qZA(),t.TgZ(9,"input",6,7),t.NdJ("input",function(){t.CHM(r);const c=t.MAs(10);return n.findPresupuesto(c.value.toLowerCase().trim())}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",8),t.TgZ(12,"table"),t.TgZ(13,"thead"),t.TgZ(14,"tr"),t.TgZ(15,"th"),t._uU(16,"N\xb0 Presupuesto"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Cliente"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Obra"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Tipo"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"IVA"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Fecha de creaci\xf3n"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Estado"),t.qZA(),t._UZ(29,"th",9),t.qZA(),t.qZA(),t.TgZ(30,"tbody"),t.YNc(31,S,24,13,"tr",10),t.qZA(),t.qZA(),t.qZA()}2&e&&(t.xp6(31),t.Q6J("ngForOf",n.PresupuestosFiltered))},directives:[u.sg,u.mk],pipes:[u.uU],styles:["[_nghost-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:100%;grid-template-rows:max-content 1fr;padding:0rem 1rem;grid-gap:.3rem;gap:.3rem;border-radius:5px;background:linear-gradient(to bottom,#606c88,#3f4c6b);color:#fff}header[_ngcontent-%COMP%]{display:flex;flex-direction:column}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex-grow:1;padding:.5rem 0;font-size:1.5rem;font-style:italic}.table-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;height:100%;width:100%;overflow-y:auto;padding:px .3rem}table[_ngcontent-%COMP%]{position:relative;border-collapse:collapse;width:100%;box-shadow:0 0 20px #00000026;border-radius:5px 5px 0 0;background-color:#fff;color:#333;font-size:15px}@media (max-width: 992px){table[_ngcontent-%COMP%]{overflow-x:auto}}table[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;box-shadow:0 0 5px #333;z-index:5}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#fff;color:#333;text-align:left;font-weight:700}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;min-width:max-content}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #dddddd;transition:all .1s}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--bs-gray-200)!important;color:#333!important}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-of-type(3):hover{color:#00f}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:last-child   .icons[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;flex-wrap:wrap;flex-direction:row;justify-content:space-around;font-size:20px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type{border-bottom:2px solid #009879}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.active-row[_ngcontent-%COMP%]{font-weight:700;color:#009879}"]}),o})();var k=p(3583);class z{constructor(i){this.Paginas=[{isActual:!0,pageData:[],pageNumber:1,showFooter:!0}],this.FillItems(i)}FillItems(i){i.Items.forEach(e=>{let n=this.Paginas.findIndex(C=>C.isActual);(1===this.Paginas[n].pageNumber?700:900)-this.getTableSize(this.Paginas[n].pageData)>=45?this.Paginas[n].pageData.push(e):(this.Paginas[n].isActual=!1,this.Paginas[n].showFooter=!1,this.Paginas.push({pageNumber:this.Paginas.length+1,pageData:[e],isActual:!0,showFooter:!0}))})}getTableSize(i){let e=0;return i.forEach(n=>{const s=Math.ceil(n.Descripcion.trim().length/95);let c=45*s/2+4;(s<=1||n.Descripcion.trim().length<=0)&&(c=45),e+=c}),e}}const V=["itemDescripcion"],L=["itemPrecio"],J=function(){return{minimumFractionDigits:2,maximumFractionDigits:2}};function R(o,i){if(1&o&&(t.TgZ(0,"div",5,6),t._uU(2),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.hij(" ",""===e.Item.data.Precio||"0"===e.Item.data.Precio?"":"$"+e.Item.data.Precio.toLocaleString("es-AR",t.DdM(1,J))," ")}}const Y=function(o){return{"no-itemprecio":o}};let Q=(()=>{class o{constructor(){}ngOnInit(){}ngAfterViewInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-item"]],viewQuery:function(e,n){if(1&e&&(t.Gf(V,5),t.Gf(L,5)),2&e){let r;t.iGM(r=t.CRH())&&(n.ItemDescripcion=r.first),t.iGM(r=t.CRH())&&(n.ItemPrecio=r.first)}},inputs:{Item:"Item"},decls:7,vars:6,consts:[[1,"wrapper",3,"ngClass"],[1,"item-nro"],[1,"item-descripcion"],["itemDescripcion",""],["class","item-precio text-wrap",4,"ngIf"],[1,"item-precio","text-wrap"],["itemPrecio",""]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2,3),t._uU(5),t.qZA(),t.YNc(6,R,3,2,"div",4),t.qZA()),2&e&&(t.Q6J("ngClass",t.VKq(4,Y,"Cerrado"===n.Item.TipoPresupuesto)),t.xp6(2),t.hij(" ",n.Item.itemNro," "),t.xp6(3),t.hij(" ",n.Item.data.Descripcion," "),t.xp6(1),t.Q6J("ngIf","Abierto"===n.Item.TipoPresupuesto))},directives:[u.mk,u.O5],styles:["[_nghost-%COMP%]{display:flex;width:100%}.wrapper[_ngcontent-%COMP%]{position:relative;display:grid;width:100%;height:100%;grid-template-columns:6% 1fr 14%;grid-template-rows:1fr;grid-gap:1px;gap:1px;border-bottom:2px solid #ccc}.wrapper.no-itemprecio[_ngcontent-%COMP%]{grid-template-columns:6% 1fr}.wrapper[_ngcontent-%COMP%]   .item-nro[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;flex-grow:1}.wrapper[_ngcontent-%COMP%]   .item-descripcion[_ngcontent-%COMP%]{display:flex;outline:none;width:100%;height:100%;overflow:hidden;white-space:pre-line;font-size:15px;border:2px solid transparent;transition:.2s all}.wrapper[_ngcontent-%COMP%]   .item-precio[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:flex-end;align-items:flex-end;font-weight:600;outline:none;flex-grow:1;word-wrap:break-word;word-break:break-all;border:2px solid transparent;transition:.1s all}"]}),o})();const B=["PdfDocument"];function G(o,i){1&o&&(t.TgZ(0,"header"),t.TgZ(1,"div",2),t.TgZ(2,"h3",28),t._uU(3,"Oferta Economica"),t.qZA(),t.TgZ(4,"div",29),t._UZ(5,"img",30),t.qZA(),t.qZA(),t.TgZ(6,"div",31),t.TgZ(7,"div",32),t.TgZ(8,"div",33),t._uU(9,"Calle 10 N\xb0 3758, Berazategui."),t.qZA(),t.TgZ(10,"div",33),t.TgZ(11,"h5",28),t._uU(12,"DOS METAL CONS SRL"),t.qZA(),t._uU(13," www.dosmetal.com.ar "),t.qZA(),t.TgZ(14,"div",33),t._uU(15,"Contacto: 11-40999026"),t.qZA(),t.qZA(),t.qZA(),t.qZA())}function H(o,i){if(1&o&&(t.TgZ(0,"div",34),t.TgZ(1,"div",33),t.TgZ(2,"div",35),t.TgZ(3,"span"),t._uU(4,"Sres:"),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"div",35),t.TgZ(8,"span"),t._uU(9,"Obra:"),t.qZA(),t.TgZ(10,"span"),t._uU(11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",33),t.TgZ(13,"div",35),t.TgZ(14,"span"),t._uU(15,"Fecha:"),t.qZA(),t.TgZ(16,"span"),t._uU(17),t.ALo(18,"date"),t.qZA(),t.qZA(),t.TgZ(19,"div",35),t.TgZ(20,"span"),t._uU(21,"Presupuesto num:"),t.qZA(),t.TgZ(22,"span"),t._uU(23),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(3);t.xp6(6),t.Oqu(e.Presupuesto.Cliente.nombre),t.xp6(5),t.Oqu(e.Presupuesto.Obra),t.xp6(6),t.hij("",t.xi3(18,4,e.Presupuesto.Fecha,"dd-MM-YYYY")," "),t.xp6(6),t.Oqu(0===e.Presupuesto.PresupuestoNum?1e3:e.Presupuesto.PresupuestoNum)}}function $(o,i){1&o&&(t.TgZ(0,"div",36),t._uU(1," Precio "),t.qZA())}const X=function(o,i,e,n){return{page:o,data:i,itemNro:e,TipoPresupuesto:n}};function K(o,i){if(1&o&&t._UZ(0,"app-item",37,38),2&o){const e=i.$implicit,n=i.index,r=t.oxw().$implicit,s=t.oxw(2);t.Q6J("id",n+1)("Item",t.l5B(2,X,r.pageNumber,e,n+1,s.Presupuesto.TipoPresupuesto))}}function W(o,i){1&o&&(t.TgZ(0,"span"),t._uU(1,"IVA 21%:"),t.qZA())}const f=function(){return{minimumFractionDigits:2,maximumFractionDigits:2}};function tt(o,i){if(1&o&&(t.TgZ(0,"span",48),t._uU(1),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.Presupuesto.IVA21.toLocaleString("es-AR",t.DdM(1,f))+"$","")}}function et(o,i){if(1&o&&(t.TgZ(0,"div",39),t.TgZ(1,"div",40),t.TgZ(2,"div",33),t.TgZ(3,"span"),t._uU(4,"Forma de pago:"),t.qZA(),t.TgZ(5,"span"),t._uU(6,"Plazo de entrega:"),t.qZA(),t.TgZ(7,"span"),t._uU(8,"Lugar de entrega:"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Validez de la oferta:"),t.qZA(),t.qZA(),t.TgZ(11,"div",41),t.TgZ(12,"div",null,42),t._uU(14),t.qZA(),t.TgZ(15,"div",null,43),t._uU(17),t.qZA(),t.TgZ(18,"div",null,44),t._uU(20),t.qZA(),t.TgZ(21,"span",null,45),t._uU(23),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div",46),t.TgZ(25,"div",33),t.TgZ(26,"span"),t._uU(27,"Subtotal:"),t.qZA(),t.YNc(28,W,2,0,"span",9),t.TgZ(29,"span"),t._uU(30,"Total:"),t.qZA(),t.qZA(),t.TgZ(31,"div",47),t.TgZ(32,"span",48),t._uU(33),t.qZA(),t.YNc(34,tt,2,2,"span",49),t.TgZ(35,"span",48),t._uU(36),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(3);t.xp6(14),t.hij(" ",e.Presupuesto.FormaDePago||"..."," "),t.xp6(3),t.hij(" ",e.Presupuesto.PlazoDeEntrega||"..."," "),t.xp6(3),t.hij(" ",e.Presupuesto.LugarDeEntrega||"..."," "),t.xp6(3),t.Oqu(e.Presupuesto.ValidezDeOferta||"..."),t.xp6(5),t.Q6J("ngIf","Incluido"===e.Presupuesto.IvaIncluido),t.xp6(5),t.hij(" ",e.Presupuesto.SubTotal.toLocaleString("es-AR",t.DdM(8,f))+"$",""),t.xp6(1),t.Q6J("ngIf","Incluido"===e.Presupuesto.IvaIncluido),t.xp6(2),t.hij(" ",e.Presupuesto.Total.toLocaleString("es-AR",t.DdM(9,f))+"$"," ")}}function nt(o,i){if(1&o&&(t.TgZ(0,"div",50),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.Presupuesto.Nota," ")}}function ot(o,i){if(1&o&&(t.TgZ(0,"div",8),t.YNc(1,G,16,0,"header",9),t.TgZ(2,"div",10,11),t.YNc(4,H,24,7,"div",12),t.TgZ(5,"div",13),t.TgZ(6,"div",14),t.TgZ(7,"div",15),t._uU(8,"Item"),t.qZA(),t.TgZ(9,"div",16),t._uU(10,"Descripci\xf3n"),t.qZA(),t.YNc(11,$,2,0,"div",17),t.qZA(),t.TgZ(12,"div",18,19),t.YNc(14,K,2,7,"app-item",20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"footer",21,22),t.YNc(17,et,37,10,"div",23),t.YNc(18,nt,2,1,"div",24),t.TgZ(19,"div",25,26),t._uU(21," Los precios cotizados pueden ser susceptibles de modificaciones debido a las variaciones que se produzcan en el mercado al momento de confirmar y abonar efectivamente la operaci\xf3n. "),t.qZA(),t.TgZ(22,"span",27),t._uU(23),t.qZA(),t.qZA(),t.qZA()),2&o){const e=i.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",1===e.pageNumber),t.xp6(3),t.Q6J("ngIf",1===e.pageNumber),t.xp6(7),t.Q6J("ngIf","Abierto"===n.Presupuesto.TipoPresupuesto),t.xp6(3),t.Q6J("ngForOf",e.pageData),t.xp6(3),t.Q6J("ngIf",e.showFooter),t.xp6(1),t.Q6J("ngIf",n.Presupuesto.Nota.length>0&&e.pageNumber===n.Paginas.length),t.xp6(5),t.AsE("P\xe0gina ",e.pageNumber," de ",n.Paginas.length,"")}}function rt(o,i){if(1&o&&(t.TgZ(0,"div",5,6),t.YNc(2,ot,24,8,"div",7),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.Paginas)}}let it=(()=>{class o{constructor(e,n){this.PresupuestoStore=e,this.ActivatedRoute=n,this.Paginas=[],this.isProduction=!1,this.BackToEdit=new t.vpe;const r=this.ActivatedRoute.snapshot.params._id;this.PresupuestoStore.Presupuestos$.subscribe(s=>{this.Presupuesto=s.find(c=>c._id===r),console.log(s.find(c=>c._id===r))})}ngOnInit(){this.Paginas=new z(this.Presupuesto).Paginas}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.R),t.Y36(g.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-preview-presupuesto"]],viewQuery:function(e,n){if(1&e&&t.Gf(B,5),2&e){let r;t.iGM(r=t.CRH())&&(n.PdfDocument=r.first)}},outputs:{BackToEdit:"BackToEdit"},decls:9,vars:1,consts:[[1,"btn","btn-outline-secondary","btn-sm"],[1,"fas","fa-chevron-left"],[1,"title"],[1,"btn","btn-outline-success","btn-sm"],["class","document",4,"ngIf"],[1,"document"],["PdfDocument",""],["class","page",4,"ngFor","ngForOf"],[1,"page"],[4,"ngIf"],[1,"body"],["bodyTemplate",""],["class","client-data",4,"ngIf"],[1,"presupuesto"],[1,"pre-header"],[1,"item-nro"],[1,"item-description","text-start"],["class","item-precio",4,"ngIf"],[1,"pre-body"],["tablePresupuesto",""],[3,"id","Item",4,"ngFor","ngForOf"],[1,"footer"],["footerTemplate",""],["class","price",4,"ngIf"],["class","nota-user alert alert-warning",4,"ngIf"],[1,"warning","nota"],["notaPrecio",""],[1,"page-indicator"],[1,"m-0"],[1,"logo"],["src","../assets/logo.jpg","alt",""],[1,"Company"],[1,"data-wrapper"],[1,"data"],[1,"client-data"],[1,"data-row"],[1,"item-precio"],[3,"id","Item"],["itemEl",""],[1,"price"],[1,"payment-methods"],[1,"values","ms-3"],["metodo",""],["PlazoDeEntrega",""],["LugarDeEntrega",""],["ValidezDelPresupuesto",""],[1,"wraper"],[1,"values"],[1,"text-end","ms-2"],["class","text-end ms-2",4,"ngIf"],[1,"nota-user","alert","alert-warning"]],template:function(e,n){1&e&&(t.TgZ(0,"header"),t.TgZ(1,"button",0),t._UZ(2,"i",1),t._uU(3," volver "),t.qZA(),t.TgZ(4,"div",2),t._uU(5,"Previsualizar presupuesto"),t.qZA(),t.TgZ(6,"button",3),t._uU(7,"Finalizar"),t.qZA(),t.qZA(),t.YNc(8,rt,3,1,"div",4)),2&e&&(t.xp6(8),t.Q6J("ngIf",void 0!==n.Presupuesto))},directives:[u.O5,u.sg,Q],pipes:[u.uU],styles:["[_nghost-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1fr;grid-template-rows:max-content 1fr;justify-items:center;grid-gap:.5rem;gap:.5rem}[_nghost-%COMP%] > header[_ngcontent-%COMP%]{position:sticky;top:0px;display:flex;width:100%;justify-content:space-between;align-items:center;flex-wrap:wrap;padding:.5rem .3rem;gap:.3rem;background:var(--bs-gray-400);z-index:5}[_nghost-%COMP%] > header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:25px;font-style:italic}.control-bar[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;justify-content:center;align-items:flex-start;padding:.2rem;border-bottom:2px solid #ccc}.control-bar[_ngcontent-%COMP%]   #add-btn[_ngcontent-%COMP%]{width:20%;display:flex;justify-content:center;align-items:center;padding:5px;border:2px solid #2497c4;border-radius:3px;transition:.3s all;cursor:pointer}.control-bar[_ngcontent-%COMP%]   #add-btn[_ngcontent-%COMP%]:not(.control-bar   #add-btn[_ngcontent-%COMP%]:disabled):hover{background-color:#2497c4;color:#fff;box-shadow:0 2px 2px #ccc}.control-bar[_ngcontent-%COMP%]   #add-btn.edit[_ngcontent-%COMP%]{border:2px solid #16ca05}.control-bar[_ngcontent-%COMP%]   #add-btn.edit[_ngcontent-%COMP%]:hover{background-color:#16ca05}.document[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:max-content;max-height:100%;gap:5px;margin:2px;overflow-y:auto;font-family:Arial,Helvetica,sans-serif!important}.document[_ngcontent-%COMP%]   .page[_ngcontent-%COMP%]{display:flex;position:relative;flex-direction:column;justify-content:space-between;width:841px;min-height:1230px;height:1230px;padding:10px 10px 2px;border-radius:1.5px;z-index:2;border:2px solid transparent;transition:2s height}.document[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{position:relative;display:grid;width:calc(100% - 2px);grid-template-columns:1fr;border:2px solid black}.document[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;position:relative;width:100%;height:70px;align-items:center;justify-content:center;font-family:sans-serif;font-weight:700;border-bottom:2px solid #000;background-color:#ccc}.document[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{position:absolute;top:0px;right:0px;display:flex;height:calc(100% - 1px);background-color:#2497c4;align-items:center}.document[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.document[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .Company[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;align-self:center;justify-content:space-between;align-items:center;grid-column-start:1;grid-column-end:3}.document[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .Company[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:5px 5px 0}.document[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .Company[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]:nth-child(1){align-self:flex-end}.document[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .Company[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]:nth-child(3){align-self:flex-end}.document[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .Company[_ngcontent-%COMP%]   .data-wrapper[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;justify-content:space-between;align-items:center}.document[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{width:100%;flex-grow:1;display:flex;flex-direction:column}.document[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .client-data[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;padding:20px 15px}.document[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .client-data[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{padding-top:5px}.document[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .client-data[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.document[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .client-data[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){color:#333;font-weight:700;margin-right:5px}.document[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .client-data[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){color:#444}.document[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .client-data[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]:first-of-type   .data-row[_ngcontent-%COMP%]{justify-content:start}.document[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .presupuesto[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%}.document[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .presupuesto[_ngcontent-%COMP%]   .pre-header[_ngcontent-%COMP%]{display:flex;width:100%;height:40px;background-color:#ccc;font-family:sans-serif;color:#333}.document[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .presupuesto[_ngcontent-%COMP%]   .pre-header[_ngcontent-%COMP%]   .item-nro[_ngcontent-%COMP%]{min-width:6%;display:flex;justify-content:center;align-items:center}.document[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .presupuesto[_ngcontent-%COMP%]   .pre-header[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]{flex-grow:1;display:flex;justify-content:flex-start;padding-left:.3rem;align-items:center}.document[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .presupuesto[_ngcontent-%COMP%]   .pre-header[_ngcontent-%COMP%]   .item-precio[_ngcontent-%COMP%]{width:15%;display:flex;justify-content:center;align-items:center}.document[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .presupuesto[_ngcontent-%COMP%]   .pre-body[_ngcontent-%COMP%]{position:relative}.document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:5px;height:150px;max-height:150px;justify-content:flex-end}.document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .nota-user[_ngcontent-%COMP%]{width:100%;padding:.5rem;margin:0;font-size:12px;font-weight:700}.document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .nota[_ngcontent-%COMP%]{font-size:10px;color:gray;text-align:justify;font-weight:700}.document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .page-indicator[_ngcontent-%COMP%]{display:block;font-size:10px;font-weight:700;align-self:end}.document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;margin-top:10px;font-size:14px}.document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .payment-methods[_ngcontent-%COMP%]{position:relative}.document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .payment-methods[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{position:absolute;bottom:0px;right:-50px}.document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .wraper[_ngcontent-%COMP%], .document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .payment-methods[_ngcontent-%COMP%]{display:flex}.document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .wraper[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .wraper[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .payment-methods[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .payment-methods[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .wraper[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .payment-methods[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:sans-serif;font-size:14px;color:#848484}.document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .wraper[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .document[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .payment-methods[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:sans-serif;font-size:14px;color:#444;font-weight:700}"]}),o})();const st=["pdfView"],at=["Pdf"],ct=[{path:"",component:j},{path:"editar-presupuesto/:_id",component:A},{path:"crear-presupuesto/:_id",component:D},{path:"ver/:_id",component:(()=>{class o{constructor(e,n){this.PresupuestoStore=e,this.ActivatedRoute=n,this.PresupuestoStore.getPresupuesto(this.ActivatedRoute.snapshot.params._id)}ngOnInit(){}ngAfterViewInit(){const e=new k.ZP("p","px","a4");e.html(this.Pdf.PdfDocument.nativeElement,{html2canvas:{scale:(e.internal.pageSize.width-20)/this.Pdf.PdfDocument.nativeElement.scrollWidth},x:5,y:1,autoPaging:"slice",callback:()=>{const s=e.output("datauristring",{filename:"texto de prueba"});this.pdfView.nativeElement.setAttribute("src",s)}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.R),t.Y36(g.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-presupuestos-viewer"]],viewQuery:function(e,n){if(1&e&&(t.Gf(st,5),t.Gf(at,5)),2&e){let r;t.iGM(r=t.CRH())&&(n.pdfView=r.first),t.iGM(r=t.CRH())&&(n.Pdf=r.first)}},decls:5,vars:0,consts:[[1,"pdf-view"],["type","application/pdf"],["pdfView",""],["Pdf",""]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"embed",1,2),t.qZA(),t._UZ(3,"app-preview-presupuesto",null,3))},directives:[it],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%;flex-direction:column}app-preview-presupuesto[_ngcontent-%COMP%]{position:fixed;z-index:-1}.pdf-view[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.pdf-view[_ngcontent-%COMP%]   embed[_ngcontent-%COMP%]{width:100%;height:100%}"]}),o})()},{path:"**",redirectTo:""}];let ut=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[g.Bz.forChild(ct)],g.Bz]}),o})();var pt=p(1752);let lt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.ez,ut,pt.q,a.UX]]}),o})()}}]);