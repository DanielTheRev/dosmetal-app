"use strict";(self.webpackChunkdosmetal_app_frontend=self.webpackChunkdosmetal_app_frontend||[]).push([[198],{1198:(F,d,s)=>{s.r(d),s.d(d,{RetirosModule:()=>A});var l=s(9808),u=s(2382),g=s(1598),h=s(5861),p=s(1764),t=(s(3634),s(5e3)),r=s(8966),m=s(2639),f=s(5561);const y=["dayLi"];function v(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"li",2,3),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().setDay(c)}),t._uU(2),t.ALo(3,"dayJS"),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,e.timestamp)," ")}}let D=(()=>{class n{constructor(e){this.retirosStoreServie=e,this.MonthID="",this.Days=[],this.DayMonthIDs=new t.vpe}ngOnInit(){}ngAfterViewInit(){this.dayLi.forEach(e=>{e.nativeElement.addEventListener("click",o=>{this.dayLi.forEach(a=>a.nativeElement.classList.remove("active")),o.target.classList.add("active")})})}setDay(e){this.DayMonthIDs.emit({dayID:e._id,dayTimestamp:e.timestamp,monthID:this.MonthID})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.$))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-days-list"]],viewQuery:function(e,o){if(1&e&&t.Gf(y,5),2&e){let a;t.iGM(a=t.CRH())&&(o.dayLi=a)}},inputs:{MonthID:"MonthID",Days:"Days"},outputs:{DayMonthIDs:"DayMonthIDs"},decls:2,vars:1,consts:[[1,"list-group","list-group-flush"],["class","list-group-item list-group-item-action border-0","style","cursor: pointer",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","border-0",2,"cursor","pointer",3,"click"],["dayLi",""]],template:function(e,o){1&e&&(t.TgZ(0,"ul",0),t.YNc(1,v,4,3,"li",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.Days))},directives:[l.sg],pipes:[f.N],styles:[""]}),n})();function C(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"div",9),t.TgZ(2,"div",10),t.TgZ(3,"h3",11),t._uU(4),t.qZA(),t.qZA(),t.TgZ(5,"app-days-list",12),t.NdJ("DayMonthIDs",function(a){return t.CHM(e),t.oxw().DayMonthIDs=a}),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=i.$implicit,o=t.oxw();t.xp6(4),t.hij(" ",o.formatDate(e.timeStamp)," "),t.xp6(1),t.Q6J("MonthID",e._id)("Days",e.days.sort())}}p.locale("es");let _=(()=>{class n{constructor(e,o){this.MatDialogRef=e,this.RetiroStateService=o,this.months=[],this.dayJS=p}ngOnInit(){this.RetiroStateService.Months$.subscribe(e=>{console.log(e),this.months=e.sort((o,a)=>a.timeStamp-o.timeStamp).map(o=>(o.days.sort((a,c)=>c.timestamp-a.timestamp),o))})}saveChanges(){this.MatDialogRef.close(this.DayMonthIDs)}formatDate(e){return this.dayJS(e).format("MMMM-YYYY")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.so),t.Y36(m.$))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-change-date-dialog"]],decls:11,vars:2,consts:[["matDialogTitle",""],[1,"mat-typography"],[1,"container-fluid"],[1,"row","g-2"],["class","col-4",4,"ngFor","ngForOf"],["align","end"],["matDialogClose","",1,"btn","btn-secondary","btn-sm","me-1"],[1,"btn","btn-primary","btn-sm",3,"disabled","click"],[1,"col-4"],[1,"card","w-100","shadow"],[1,"card-body"],[1,"card-title","text-center","m-0","bg-primary","text-light","rounded",2,"text-transform","capitalize"],[3,"MonthID","Days","DayMonthIDs"]],template:function(e,o){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Seleccione una fecha"),t.qZA(),t.TgZ(2,"mat-dialog-content",1),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.YNc(5,C,6,3,"div",4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"mat-dialog-actions",5),t.TgZ(7,"button",6),t._uU(8,"Cancelar"),t.qZA(),t.TgZ(9,"button",7),t.NdJ("click",function(){return o.saveChanges()}),t._uU(10," Guardar "),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("ngForOf",o.months),t.xp6(4),t.Q6J("disabled",!o.DayMonthIDs))},directives:[r.uh,r.xY,l.sg,D,r.H8,r.ZT],styles:[""]}),n})();var Z=s(3171);function M(n,i){if(1&n&&(t.TgZ(0,"span",5),t._uU(1),t.qZA()),2&n){const e=i.$implicit,o=i.index,a=t.oxw();t.xp6(1),t.lnq(" ",e.retiro," unidades de ",e.nombre," ",o===a.event.itemsRetirados.length-1?"":";"," ")}}let T=(()=>{class n{constructor(e){this.MaterialDialog=e,this.UpdateState=new t.vpe}ngOnInit(){console.log(this.event)}informState(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-event-item"]],inputs:{event:"event"},outputs:{UpdateState:"UpdateState"},decls:8,vars:2,consts:[[1,"list-group-item","d-flex","justify-content-between","align-items-start","list-group-item-primary"],[1,"ms-2","me-auto"],[1,"fw-bold"],["class","text-secondary text-decoration-underline",4,"ngFor","ngForOf"],[1,"badge","bg-primary","rounded-pill","fw-normal",3,"click"],[1,"text-secondary","text-decoration-underline"]],template:function(e,o){1&e&&(t.TgZ(0,"li",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3," Se retiraron "),t.YNc(4,M,2,3,"span",3),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"span",4),t.NdJ("click",function(){return o.informState()}),t._uU(7,"Informar Devoluci\xf3n"),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngForOf",o.event.itemsRetirados),t.xp6(1),t.hij(" para ",o.event.nombreQuienRetira,". "))},directives:[l.sg],styles:["#inform[_ngcontent-%COMP%]{position:absolute;cursor:pointer;font-weight:400;top:1px;right:1px}"]}),n})();function x(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-event-item",6),t.NdJ("UpdateState",function(a){return t.CHM(e),t.oxw().saveState(a)}),t.qZA()}2&n&&t.Q6J("event",i.$implicit)}p.extend(Z);const S=[{path:"",component:(()=>{class n{constructor(e,o){this.MatDialog=e,this.RetiroStoreService=o,this.dayJS=p(),this.events=[],this.eventsSelected=[],this.RetiroStoreService.Retiros$.subscribe(a=>{this.events=a.dayEvents,this.eventsSelected=a.dayEvents})}ngOnInit(){}saveState(e){return(0,h.Z)(function*(){})()}changeDate(){this.MatDialog.open(_,{width:"1200px"}).afterClosed().subscribe(o=>{!o||(console.log(o),this.dayJS=p(o.dayTimestamp),console.log(o),this.RetiroStoreService.setRetirosDay(o.monthID,o.dayID).subscribe(a=>this.eventsSelected=a))})}ngOnDestroy(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.uw),t.Y36(m.$))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-retiros"]],decls:10,vars:3,consts:[[1,"wrapper","animate__animated","animate__slideInDown"],[1,"day","animate__animated","animate__bounce","animate__delay-1s"],[1,"btn","btn-primary","btn-sm","mt-1",3,"click"],[1,"events","p-1",2,"overflow","auto"],[1,"list-group"],[3,"event","UpdateState",4,"ngFor","ngForOf"],[3,"event","UpdateState"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"header"),t._uU(2),t.TgZ(3,"span",1),t._uU(4),t.qZA(),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.changeDate()}),t._uU(6,"Cambiar Fecha"),t.qZA(),t.qZA(),t.TgZ(7,"main",3),t.TgZ(8,"ul",4),t.YNc(9,x,1,1,"app-event-item",5),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.hij(" Retiros ",o.dayJS.format("MMMM YYYY")," "),t.xp6(2),t.hij(" ",o.dayJS.format("LLLL")," "),t.xp6(5),t.Q6J("ngForOf",o.eventsSelected))},directives:[l.sg,T],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%;justify-content:center;align-items:center}.list-group-item[_ngcontent-%COMP%]{position:relative}.wrapper[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1fr;grid-template-rows:max-content 1fr}header[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:1.5rem;padding:.5rem;background-color:#2b9bc7;color:#fff;box-shadow:0 2px 5px #ccc;text-transform:uppercase;-webkit-user-select:none;user-select:none;z-index:2}header[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{display:flex;border:2px solid #fff;background-color:#1abc9c;color:#fff;padding:0 1rem;font-size:1.2rem}@media (max-width: 992px){header[_ngcontent-%COMP%]{font-size:1rem}header[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{font-size:.8rem}}"]}),n})()},{path:"**",redirectTo:""}];let R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.Bz.forChild(S)],g.Bz]}),n})();var b=s(1752),I=s(4586);let A=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,R,b.q,u.UX,I.D]]}),n})()}}]);