"use strict";(self.webpackChunkdosmetal_app_frontend=self.webpackChunkdosmetal_app_frontend||[]).push([[914],{914:(cn,y,g)=>{g.r(y),g.d(y,{StockModule:()=>rn});var l=g(9808),c=g(2382),P=g(520),m=g(1598),h=g(5861),_=g(2340),t=g(5e3),u=g(430),f=g(49),v=g(4795);const I=["ImgElement"];function A(e,i){if(1&e&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.Q6J("value",n)("ngValue",n),t.xp6(1),t.hij(" ",n.rubro," ")}}function w(e,i){if(1&e&&(t.TgZ(0,"div",6),t.TgZ(1,"label",7),t._uU(2,"Categoria"),t.qZA(),t.TgZ(3,"select",26),t.YNc(4,A,2,3,"option",27),t.qZA(),t.qZA()),2&e){const n=t.oxw();t.xp6(4),t.Q6J("ngForOf",n.availableCategories)}}function k(e,i){1&e&&(t.TgZ(0,"li",33),t.TgZ(1,"label",7),t._uU(2,"Cantidad de contenedores"),t.qZA(),t._UZ(3,"input",40),t.qZA())}function q(e,i){1&e&&(t.TgZ(0,"li",33),t.TgZ(1,"label",7),t._uU(2,"Unidad de medida"),t.qZA(),t.TgZ(3,"select",41),t.TgZ(4,"option",42),t._uU(5,"unidades"),t.qZA(),t.TgZ(6,"option",43),t._uU(7,"kg"),t.qZA(),t.TgZ(8,"option",44),t._uU(9,"mts"),t.qZA(),t.qZA(),t.qZA())}function U(e,i){1&e&&(t.TgZ(0,"li",45),t._uU(1," Esta abierto "),t._UZ(2,"input",46),t.qZA())}function S(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",29),t.TgZ(1,"div",30),t.TgZ(2,"i",31),t.NdJ("click",function(){const a=t.CHM(n).index;return t.oxw().deleteInventario(a)}),t.qZA(),t.qZA(),t.TgZ(3,"ul",32),t.TgZ(4,"li",33),t.TgZ(5,"label",34),t._uU(6,"Tipo de contenedor"),t.qZA(),t.TgZ(7,"div",35,36),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"li",33),t.TgZ(11,"label",7),t._uU(12,"Cantidad de unidades"),t.qZA(),t._UZ(13,"input",37),t.qZA(),t.YNc(14,k,4,0,"li",38),t.YNc(15,q,10,0,"li",38),t.YNc(16,U,3,0,"li",39),t.qZA(),t.qZA()}if(2&e){const n=i.index,o=t.oxw();t.Q6J("formGroupName",n),t.xp6(9),t.hij(" ",o.getInventarioValue(n).tipo_contenedor," "),t.xp6(5),t.Q6J("ngIf","Unidades sueltas"!==o.getInventarioValue(n).tipo_contenedor),t.xp6(1),t.Q6J("ngIf","Unidades sueltas"!==o.getInventarioValue(n).tipo_contenedor),t.xp6(1),t.Q6J("ngIf","Unidades sueltas"!==o.getInventarioValue(n).tipo_contenedor)}}const N=function(e){return{"btn-success":e}};let x=(()=>{class e{constructor(n,o,r,a,s,p,Z){this.FormBuilder=n,this.InventoryService=o,this.InventoryStore=r,this.InventoryNotifications=a,this.ActivatedRoute=s,this.Router=p,this.Location=Z,this.imgFile=void 0,this.isNewInventory=!0,this.title="Nuevo inventario",this.availableCategories=[{rubro:"Construccion",letra:"A"},{rubro:"Herramienta",letra:"B"},{rubro:"Selladores",letra:"C"},{rubro:"Pintureria",letra:"D"},{rubro:"Seguridad",letra:"E"},{rubro:"Iluminacion",letra:"F"},{rubro:"Libreria",letra:"G"},{rubro:"Electricidad",letra:"H"},{rubro:"Sanitario",letra:"I"},{rubro:"Vestuario",letra:"J"},{rubro:"Ferreteria",letra:"K"},{rubro:"Silicona",letra:"L"},{rubro:"Sin categoria",letra:"M"}],this.Environment=_.N,this.haveImg={exist:!1,link:""},this.form=this.createForm()}ngOnInit(){const o=this.InventoryStore.getIventoryItem(this.ActivatedRoute.snapshot.params._id);o&&(this.form.reset({Categoria:o.Categoria,Nombre:o.Nombre,Ubicacion:o.Ubicacion,ImgRef:o.ImgRef,Inventario:o.Inventario,Cant_poco_stock:o.Cant_poco_stock}),o.Inventario.forEach(r=>{this.getInventario().push(this.FormBuilder.group(r))}),this.isNewInventory=!1,this.title="Modificar inventario",this.haveImg={exist:!0,link:`${this.Environment.server_uri}/${o.ImgRef}`})}loadImg(n){var o=this;return(0,h.Z)(function*(){try{if(!n.clipboardData)return;if(!n.clipboardData.files[0].type.startsWith("image"))return console.log("No es una imagen valida");const a=window.URL.createObjectURL(n.clipboardData.files[0]);o.ImgElement.nativeElement.setAttribute("src",a),o.imgFile=n.clipboardData.files[0],o.InventoryNotifications.toastNotification("info","Imagen cargada correctamente")}catch(r){}})()}handleInputImg(n){const o=n.target.files;if(!o[0].type.startsWith("image"))return console.log("No es una imagen valida");const r=window.URL.createObjectURL(o[0]);this.ImgElement.nativeElement.setAttribute("src",r),this.imgFile=o[0],this.InventoryNotifications.toastNotification("info","Imagen cargada correctamente")}createForm(){return this.FormBuilder.group({Categoria:["",c.kI.required],Nombre:["",c.kI.required],Ubicacion:["",c.kI.required],ImgRef:[""],Inventario:this.FormBuilder.array([]),Cant_poco_stock:[0,[c.kI.required,c.kI.min(1)]]})}getInventario(){return this.form.controls.Inventario}addInventario(n){"Unidades sueltas"!==n?this.getInventario().push(this.FormBuilder.group({tipo_contenedor:[n,c.kI.required],unidades_en_contenedor:[0,[c.kI.required]],cantidad_de_contenedor:[0,[c.kI.required]],unidad_medida:["",c.kI.required],esta_abierto:[!1]})):this.getInventario().push(this.FormBuilder.group({tipo_contenedor:[n],unidades_en_contenedor:[0,c.kI.required],unidad_medida:["unidades"]}))}getInventarioValue(n){return this.getInventario().at(n).value}deleteInventario(n){this.getInventario().removeAt(n)}submitData(){if(this.form.invalid)return console.log("Formulario no valido");let n=0;const o=this.form.value;let r="";switch(o.Inventario.forEach(a=>{n+="Unidades sueltas"===a.tipo_contenedor?a.unidades_en_contenedor:a.unidades_en_contenedor*a.cantidad_de_contenedor}),!0){case n<=o.Cant_poco_stock&&n>0:r="Poco Stock";break;case 0===n:r="Sin Stock";break;default:r="Stock Suficiente"}if(this.isNewInventory)this.InventoryService.addNewInventory(Object.assign({TotalInventario:n,InventoryState:r},o),this.imgFile).subscribe(a=>{this.InventoryStore.addInventory(a.item),this.InventoryNotifications.toastNotification("success",a.message),this.goBack()});else{const a=Object.assign({_id:this.ActivatedRoute.snapshot.params._id},o);this.InventoryService.editInventory(Object.assign({TotalInventario:n,InventoryState:r},a),this.imgFile).subscribe({next:s=>{console.log(s),this.InventoryStore.addStockToInventoryOrEdit(s.item._id,s.item).then(p=>{this.InventoryNotifications.toastNotification("success",s.message),this.goBack()})},error:s=>{this.InventoryNotifications.toastNotification("error",s.error.message)}})}}goBack(){this.Router.navigate(["home","stock","GestionInventario"])}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(c.qu),t.Y36(u.V),t.Y36(f.P),t.Y36(v.O),t.Y36(m.gz),t.Y36(m.F0),t.Y36(l.Ye))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-inventory-dialog"]],viewQuery:function(n,o){if(1&n&&t.Gf(I,5),2&n){let r;t.iGM(r=t.CRH())&&(o.ImgElement=r.first)}},decls:57,vars:9,consts:[[1,"btn","btn-warning","btn-sm",3,"click"],[1,"fas","fa-chevron-left"],[1,"title"],[1,"content",3,"formGroup","ngSubmit","paste"],[1,"data"],["class","inputs-container",4,"ngIf"],[1,"inputs-container"],[1,"form-label"],["type","text","formControlName","Nombre",1,"form-control","form-control-sm"],["formControlName","Ubicacion",1,"form-select","form-select-sm"],["value","Oficina"],["value","Pa\xf1ol"],["value","Cajon cerrado"],["type","number","formControlName","Cant_poco_stock",1,"form-control","form-control-sm"],["type","file",1,"form-control","form-control-sm",3,"change"],[1,"caja-imagen"],[3,"src"],["ImgElement",""],[1,"stock"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle","btn-sm"],[1,"dropdown-menu"],[1,"dropdown-item","user-select-none",3,"click"],["formArrayName","Inventario",1,"stock-list"],["class","stock-item",3,"formGroupName",4,"ngFor","ngForOf"],[1,"btn","btn-secondary","btm-sm",3,"disabled","ngClass"],["formControlName","Categoria",1,"form-select","form-select-sm"],[3,"value","ngValue",4,"ngFor","ngForOf"],[3,"value","ngValue"],[1,"stock-item",3,"formGroupName"],[1,"delete-icon"],[1,"fas","fa-trash",3,"click"],[1,"list-group"],[1,"list-group-item"],["for","",1,"form-label"],[1,"form-control","form-control-sm",2,"user-select","none"],["tipo_contenedor",""],["type","number","formControlName","unidades_en_contenedor",1,"form-control","form-control-sm"],["class","list-group-item",4,"ngIf"],["class","list-group-item","style","flex-direction: row; justify-content: space-between",4,"ngIf"],["type","number","formControlName","cantidad_de_contenedor",1,"form-control","form-control-sm"],["formControlName","unidad_medida",1,"form-select","form-select-sm"],["value","unidades"],["value","kg"],["value","mts"],[1,"list-group-item",2,"flex-direction","row","justify-content","space-between"],["type","checkbox","id","checkboxNoLabel","aria-label","...","formControlName","esta_abierto",1,"form-check-input"]],template:function(n,o){1&n&&(t.TgZ(0,"header"),t.TgZ(1,"button",0),t.NdJ("click",function(){return o.goBack()}),t._UZ(2,"i",1),t._uU(3," Volver "),t.qZA(),t.TgZ(4,"div",2),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"form",3),t.NdJ("ngSubmit",function(){return o.submitData()})("paste",function(a){return o.loadImg(a)}),t.TgZ(7,"div",4),t.YNc(8,w,5,1,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"label",7),t._uU(11,"Nombre"),t.qZA(),t._UZ(12,"input",8),t.qZA(),t.TgZ(13,"div",6),t.TgZ(14,"label",7),t._uU(15,"Ubicaci\xf3n"),t.qZA(),t.TgZ(16,"select",9),t.TgZ(17,"option",10),t._uU(18,"Oficina"),t.qZA(),t.TgZ(19,"option",11),t._uU(20,"Pa\xf1ol"),t.qZA(),t.TgZ(21,"option",12),t._uU(22,"Cajon cerrado"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",6),t.TgZ(24,"label",7),t._uU(25,"Cantidad minima"),t.qZA(),t._UZ(26,"input",13),t.qZA(),t.TgZ(27,"div",6),t.TgZ(28,"label",7),t._uU(29,"Imagen de referencia"),t.qZA(),t.TgZ(30,"input",14),t.NdJ("change",function(a){return o.handleInputImg(a)}),t.qZA(),t.qZA(),t.TgZ(31,"div",15),t._UZ(32,"img",16,17),t.qZA(),t.qZA(),t.TgZ(34,"div",18),t.TgZ(35,"header"),t.TgZ(36,"div",2),t._uU(37,"Listado de stock"),t.qZA(),t.TgZ(38,"div",19),t.TgZ(39,"button",20),t._uU(40," Agregar "),t.qZA(),t.TgZ(41,"ul",21),t.TgZ(42,"li",22),t.NdJ("click",function(){return o.addInventario("Caja")}),t._uU(43,"Caja"),t.qZA(),t.TgZ(44,"li",22),t.NdJ("click",function(){return o.addInventario("Unidades sueltas")}),t._uU(45,"Unidades sueltas"),t.qZA(),t.TgZ(46,"li",22),t.NdJ("click",function(){return o.addInventario("Bolsa")}),t._uU(47,"Bolsa"),t.qZA(),t.TgZ(48,"li",22),t.NdJ("click",function(){return o.addInventario("Rollo")}),t._uU(49,"Rollo"),t.qZA(),t.TgZ(50,"li",22),t.NdJ("click",function(){return o.addInventario("Balde")}),t._uU(51,"Balde"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"div",23),t.YNc(53,S,17,5,"div",24),t.qZA(),t.qZA(),t.TgZ(54,"footer"),t.TgZ(55,"button",25),t._uU(56," Guardar "),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(5),t.Oqu(o.title),t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(2),t.Q6J("ngIf",o.isNewInventory),t.xp6(24),t.Q6J("src",o.haveImg.exist?o.haveImg.link:"https://eustonclub.com.au/wp-content/plugins/slider/images/slider-icon.png",t.LSH),t.xp6(21),t.Q6J("ngForOf",o.getInventario().controls),t.xp6(2),t.Q6J("disabled",o.form.invalid)("ngClass",t.VKq(7,N,o.form.valid)))},directives:[c._Y,c.JL,c.sg,l.O5,c.EJ,c.JJ,c.u,l.sg,c.YN,c.Kr,c.Fj,c.wV,c.CE,c.x0,c.Wl,l.mk],styles:["[_nghost-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1fr;grid-template-rows:max-content 1fr;grid-gap:.2rem;gap:.2rem}header[_ngcontent-%COMP%]{display:flex;font-size:1.5rem;flex-direction:row;flex-wrap:wrap;align-items:center;justify-content:flex-start;gap:1rem;color:#fff}header[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{color:#fff}form[_ngcontent-%COMP%]{display:grid;grid-template-columns:250px 1fr;grid-template-rows:1fr max-content;grid-gap:.5rem;gap:.5rem;overflow:auto}@media (max-width: 768px){form[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:max-content 350px max-content}form[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:12px!important}form[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{grid-column:1!important}}form[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;flex-wrap:wrap;gap:.5rem;align-items:center;justify-content:flex-start;padding:1rem;background-color:#fff;border:2px solid var(--bs-pink);border-radius:10px}form[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .inputs-container[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;align-items:flex-start;gap:2px}form[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .inputs-container#input-paste[_ngcontent-%COMP%]{display:none}form[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .caja-imagen[_ngcontent-%COMP%]{position:relative;display:flex;width:100%;max-height:120px;border:2px solid var(--bs-gray-300);border-radius:5px}form[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .caja-imagen[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:100%;object-fit:contain;object-position:center}form[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1fr;grid-template-rows:max-content 1fr;overflow:auto;background-color:#fff;border-radius:10px}form[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between;align-items:center;gap:.3rem;background-color:var(--bs-gray-600);border:1px solid #fff;border-radius:10px;padding:0px .5rem}form[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;max-width:50%;padding:.2rem .5rem;font-size:18px;color:#fff;justify-content:center;align-items:center;gap:.2rem}form[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%]   .stock-list[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:repeat(auto-fill,15rem);grid-auto-rows:max-content;padding:.3rem;grid-gap:.2rem;gap:.2rem;grid-auto-flow:column;overflow-x:auto}@media (max-width: 468px){form[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%]   .stock-list[_ngcontent-%COMP%]{grid-auto-flow:row;justify-content:center;align-items:center}}form[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%]   .stock-list[_ngcontent-%COMP%]   .stock-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;width:max-content;height:max-content;padding:.5rem .3rem;font-size:14px;border:2px solid var(--bs-gray-500);border-radius:3px}@media (max-width: 768px){form[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%]   .stock-list[_ngcontent-%COMP%]   .stock-item[_ngcontent-%COMP%]{font-size:10px}}form[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%]   .stock-list[_ngcontent-%COMP%]   .stock-item[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{color:var(--bs-danger)}form[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%]   .stock-list[_ngcontent-%COMP%]   .stock-item[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:25px}form[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%]   .stock-list[_ngcontent-%COMP%]   .stock-item[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;padding:.4rem 1rem;border:none!important}form[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{grid-column:1/3;display:flex;width:100%;align-items:center;justify-content:flex-end}"]}),e})();var T=g(1811);const F=["img"],J=["inputImg"];function D(e,i){if(1&e&&(t.TgZ(0,"tr",29),t.TgZ(1,"th",30),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"input",31),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"input",32),t.qZA(),t.TgZ(7,"td"),t.TgZ(8,"select",33),t.TgZ(9,"option",34),t._uU(10,"Funcionando"),t.qZA(),t.TgZ(11,"option",35),t._uU(12,"Da\xf1ada"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"td"),t.TgZ(14,"select",36),t.TgZ(15,"option",37),t._uU(16,"En taller"),t.qZA(),t.TgZ(17,"option",38),t._uU(18,"En oficina"),t.qZA(),t.TgZ(19,"option",39),t._uU(20,"En pvc"),t.qZA(),t.TgZ(21,"option",40),t._uU(22,"En obra"),t.qZA(),t.TgZ(23,"option",41),t._uU(24,"En reparacion"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const n=i.index;t.Q6J("formGroupName",n),t.xp6(2),t.Oqu(n+1)}}function Q(e,i){1&e&&t._UZ(0,"i",42)}let M=(()=>{class e{constructor(n,o,r,a,s){this.FormBuilder=n,this.Location=o,this.ToolStore=r,this.InventoryNotifications=a,this.ActivatedRoute=s,this.Environment=_.N,this.haveImg={exist:!1,link:""},this.isSubmitting=!1,this.Form=this.FormBuilder.group({Nombre:["",c.kI.required],Marca:[""],Stock:this.FormBuilder.array([],[c.kI.minLength(1),c.kI.required])})}ngOnInit(){const n=this.ActivatedRoute.snapshot.params._id;if(n){const o=this.ToolStore.getTool(n);if(!o)return;this.haveImg={exist:!0,link:`${this.Environment.server_uri}/${o.imgRef}`},this.Form.reset({Nombre:o.Nombre,Marca:o.Marca}),o.Stock.forEach(r=>{this.getStock().push(this.FormBuilder.group({Fecha_Compra:r.Fecha_Compra,Cantidad:r.Cantidad,Estado:r.Estado,Ubicacion:r.Ubicacion}))})}}getStock(){return this.Form.controls.Stock}addStock(){this.getStock().push(this.FormBuilder.group({Fecha_Compra:[""],Cantidad:[,c.kI.required],Estado:[,c.kI.required],Ubicacion:[,c.kI.required]}))}RemoveStock(n){this.getStock().removeAt(n)}loadImage(n){try{if(!n.clipboardData)return;if(!n.clipboardData.files[0].type.startsWith("image"))return console.log("No es una imagen valida");const r=window.URL.createObjectURL(n.clipboardData.files[0]);this.ImgElement.nativeElement.setAttribute("src",r),this.FileImg=n.clipboardData.files[0],this.inputImg.nativeElement.files=n.clipboardData.files,this.InventoryNotifications.toastNotification("info","Imagen cargada correctamente")}catch(o){}}handleInputImg(n){const o=n.target.files;if(!o[0].type.startsWith("image"))return console.log("No es una imagen valida");const r=window.URL.createObjectURL(o[0]);this.ImgElement.nativeElement.setAttribute("src",r),this.FileImg=o[0],this.InventoryNotifications.toastNotification("info","Imagen cargada correctamente")}goBack(){this.Location.back()}getFormValues(){if(this.Form.invalid)return;const n={Data:this.Form.value,imgFile:this.FileImg};this.isSubmitting=!0,this.ToolStore.addNewTool(n).then(o=>{this.goBack(),this.isSubmitting=!1}).catch(o=>{this.isSubmitting=!1})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(c.qu),t.Y36(l.Ye),t.Y36(T.b),t.Y36(v.O),t.Y36(m.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-tool"]],viewQuery:function(n,o){if(1&n&&(t.Gf(F,5),t.Gf(J,5)),2&n){let r;t.iGM(r=t.CRH())&&(o.ImgElement=r.first),t.iGM(r=t.CRH())&&(o.inputImg=r.first)}},decls:50,vars:5,consts:[[1,"btn","btn-outline-warning","btn-sm",3,"click"],[1,"fas","fa-chevron-left"],[1,"title"],[1,"form-container",3,"paste"],[1,"form-card",3,"formGroup","ngSubmit"],[1,"data"],[1,"input-container"],[1,"form-label"],["type","text","formControlName","Nombre",1,"form-control","form-control-sm"],["for","",1,"form-label"],["type","text","formControlName","Marca",1,"form-control","form-control-sm"],["for","fileImg",1,"form-label"],["id","fileImg","type","file",1,"form-control","form-control-sm",3,"change"],["inputImg",""],[1,"tool-img"],["alt","",3,"src"],["img",""],[1,"stock-list"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"table-container"],[1,"table","table-warning","table-striped","table-borderless"],[2,"border-bottom","2px solid var(--bs-primary)"],["scope","col"],["scope","col",2,"width","170px","min-width","170px"],["formArrayName","Stock"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"footer"],[1,"btn","btn-success","btn-sm",3,"disabled","click"],["class","fas fa-spinner fa-spin",4,"ngIf"],[3,"formGroupName"],["scope","row"],["type","text","formControlName","Fecha_Compra","autocomplete","off",1,"form-control","form-control-sm"],["type","number","formControlName","Cantidad","autocomplete","off",1,"form-control","form-control-sm"],["formControlName","Estado",1,"form-select","form-select-sm"],["value","Funcionando"],["value","Da\xf1ada"],["formControlName","Ubicacion",1,"form-select","form-select-sm"],["value","En taller"],["value","En oficina"],["value","En pvc"],["value","En obra"],["value","En reparacion"],[1,"fas","fa-spinner","fa-spin"]],template:function(n,o){1&n&&(t.TgZ(0,"header"),t.TgZ(1,"button",0),t.NdJ("click",function(){return o.goBack()}),t._UZ(2,"i",1),t._uU(3," Volver "),t.qZA(),t.TgZ(4,"div",2),t._uU(5,"Nueva herramienta"),t.qZA(),t.qZA(),t.TgZ(6,"div",3),t.NdJ("paste",function(a){return o.loadImage(a)}),t.TgZ(7,"form",4),t.NdJ("ngSubmit",function(){return o.getFormValues()}),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"label",7),t._uU(11,"Nombre"),t.qZA(),t._UZ(12,"input",8),t.qZA(),t.TgZ(13,"div",6),t.TgZ(14,"label",9),t._uU(15,"Marca"),t.qZA(),t._UZ(16,"input",10),t.qZA(),t.TgZ(17,"div",6),t.TgZ(18,"label",11),t._uU(19,"Cargar imagen"),t.qZA(),t.TgZ(20,"input",12,13),t.NdJ("change",function(a){return o.handleInputImg(a)}),t.qZA(),t.qZA(),t.TgZ(22,"div",14),t._UZ(23,"img",15,16),t.qZA(),t.qZA(),t.TgZ(25,"div",17),t.TgZ(26,"div",2),t._uU(27," Listado Stock "),t.TgZ(28,"button",18),t.NdJ("click",function(){return o.addStock()}),t._uU(29," Agregar "),t.qZA(),t.qZA(),t.TgZ(30,"div",19),t.TgZ(31,"table",20),t.TgZ(32,"thead",21),t.TgZ(33,"tr"),t.TgZ(34,"th",22),t._uU(35,"#"),t.qZA(),t.TgZ(36,"th",22),t._uU(37,"Fecha compra"),t.qZA(),t.TgZ(38,"th",22),t._uU(39,"Cantidad"),t.qZA(),t.TgZ(40,"th",23),t._uU(41,"Estado"),t.qZA(),t.TgZ(42,"th",23),t._uU(43," Ubicacion "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"tbody",24),t.YNc(45,D,25,2,"tr",25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"div",26),t.TgZ(47,"button",27),t.NdJ("click",function(){return o.getFormValues()}),t.YNc(48,Q,1,0,"i",28),t._uU(49," Guardar "),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(7),t.Q6J("formGroup",o.Form),t.xp6(16),t.Q6J("src",o.haveImg.exist?o.haveImg.link:"https://eustonclub.com.au/wp-content/plugins/slider/images/slider-icon.png",t.LSH),t.xp6(22),t.Q6J("ngForOf",o.getStock().controls),t.xp6(2),t.Q6J("disabled",o.Form.invalid||o.isSubmitting),t.xp6(1),t.Q6J("ngIf",o.isSubmitting))},directives:[c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,c.CE,l.sg,c.x0,c.wV,c.EJ,c.YN,c.Kr,l.O5],styles:["[_nghost-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:100%;grid-template-rows:max-content 1fr;background-color:var(--bs-gray-200);border-radius:10px}header[_ngcontent-%COMP%]{display:flex;width:100%;padding:.5rem;justify-content:flex-start;align-items:center;gap:1rem}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:24px;color:#333}.form-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:100%;grid-template-rows:1fr 50px;place-items:center;overflow:auto}.form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1fr;grid-template-rows:1fr;grid-auto-flow:column;border-radius:10px;padding:.5rem 1rem;align-items:center;grid-gap:1rem;gap:1rem;overflow-x:auto;overflow-y:hidden}.form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;justify-content:space-around;align-items:center;gap:.3rem;border:2px solid var(--bs-gray-300);border-radius:5px;background-color:#fff;padding:1rem;gap:1rem}.form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:50px}.form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .tool-img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:200px;max-height:120px}.form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .tool-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:100%;object-fit:contain}.form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .stock-list[_ngcontent-%COMP%]{display:flex;width:max-content;height:100%;border:2px solid var(--bs-gray-300);flex-direction:column;border-radius:5px;padding:1rem;background-color:#fff;overflow:auto}.form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .stock-list[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;background-color:var(--bs-primary);border-radius:5px 5px 0 0;color:var(--bs-gray-100);font-size:20px;align-items:center;justify-content:space-between;padding:.2rem .5rem;box-shadow:0 2px 2px #333;z-index:3}.form-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;padding:.3rem .5rem;background-color:var(--bs-gray-200);border-radius:0 0 10px 10px;justify-content:flex-end;align-items:center}"]}),e})();var d=g(8966);function E(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"tr",13),t.TgZ(1,"th",14),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"select",15),t.TgZ(5,"option",16),t._uU(6,"Caja"),t.qZA(),t.TgZ(7,"option",17),t._uU(8,"Bolsa"),t.qZA(),t.TgZ(9,"option",18),t._uU(10,"Rollo"),t.qZA(),t.TgZ(11,"option",19),t._uU(12,"Balde"),t.qZA(),t.TgZ(13,"option",20),t._uU(14,"Unidades sueltas"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"td"),t._UZ(16,"input",21),t.qZA(),t.TgZ(17,"td"),t._UZ(18,"input",22),t.qZA(),t.TgZ(19,"td"),t.TgZ(20,"select",23),t.TgZ(21,"option",24),t._uU(22,"unidades"),t.qZA(),t.TgZ(23,"option",25),t._uU(24,"kg"),t.qZA(),t.TgZ(25,"option",26),t._uU(26,"mts"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"td"),t.TgZ(28,"div"),t._UZ(29,"input",27),t.qZA(),t.qZA(),t.TgZ(30,"td"),t.TgZ(31,"button",28),t.NdJ("click",function(){const a=t.CHM(n).index;return t.oxw().removeFormInventario(a)}),t._UZ(32,"i",29),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=i.index;t.Q6J("formGroupName",n),t.xp6(2),t.Oqu(n+1)}}function R(e,i){1&e&&t._UZ(0,"i",30)}let Y=(()=>{class e{constructor(n,o,r,a,s,p){this.data=n,this.MatDialogRef=o,this.FormBuilder=r,this.inventoryService=a,this.inventoryNotification=s,this.inventoryStore=p,this.submitState="waiting",this.formValues=this.FormBuilder.group({newStock:this.FormBuilder.array([],[c.kI.minLength(1),c.kI.required])})}ngOnInit(){}getNewStock(){return this.formValues.controls.newStock}addFormInventario(){this.getNewStock().push(this.FormBuilder.group({tipo_contenedor:["",c.kI.required],unidades_en_contenedor:[0,[c.kI.required,c.kI.min(1)]],cantidad_de_contenedor:[0,[c.kI.required,c.kI.min(1)]],unidad_medida:["",c.kI.required],esta_abierto:[!1]}))}removeFormInventario(n){this.getNewStock().removeAt(n)}submitData(){this.formValues.invalid||this.inventoryNotification.confirmAddToInventory(this.data.nombre,this.formValues.value.newStock).then(n=>{if(n.isConfirmed)return this.submitState="submitted",void this.inventoryService.addToInventory({reference:this.data.reference,newStock:this.formValues.value.newStock,_id:this.data._id}).subscribe(o=>{this.submitState="waiting",o.status&&this.inventoryStore.addStockToInventoryOrEdit(this.data._id,o.newStock),this.MatDialogRef.close({status:o.status,message:o.message})})})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.WI),t.Y36(d.so),t.Y36(c.qu),t.Y36(u.V),t.Y36(v.O),t.Y36(f.P))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-to-inventory-dialog"]],decls:30,vars:6,consts:[["matDialogTitle",""],[1,"text-center",3,"formGroup","ngSubmit"],[1,"mat-typography"],[1,"table"],[2,"font-size","12px"],["scope","col"],["formArrayName","newStock"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary","btn-sm",3,"disabled","click"],["align","end"],["type","button","mat-dialog-close","",1,"btn","btn-outline-secondary","btn-sm",3,"disabled"],["type","submit",1,"btn","mx-1","btn-success","btn-sm",3,"disabled"],["class","fas fa-sync-alt fa-spin",4,"ngIf"],[3,"formGroupName"],["scope","row"],["formControlName","tipo_contenedor",1,"form-select","form-select-sm"],["value","Caja"],["value","Bolsa"],["value","Rollo"],["value","Balde"],["value","Unidades sueltas"],["type","number","formControlName","unidades_en_contenedor",1,"form-control","form-control-sm"],["type","number","formControlName","cantidad_de_contenedor",1,"form-control","form-control-sm"],["formControlName","unidad_medida",1,"form-select","form-select-sm"],["value","unidades"],["value","kg"],["value","mts"],["type","checkbox","id","checkboxNoLabel","aria-label","...","formControlName","esta_abierto",1,"form-check-input"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash-alt"],[1,"fas","fa-sync-alt","fa-spin"]],template:function(n,o){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Cargar Stock"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return o.submitData()}),t.TgZ(3,"mat-dialog-content",2),t.TgZ(4,"table",3),t.TgZ(5,"thead"),t.TgZ(6,"tr",4),t.TgZ(7,"th",5),t._uU(8,"#"),t.qZA(),t.TgZ(9,"th",5),t._uU(10,"Tipo Contenedor"),t.qZA(),t.TgZ(11,"th",5),t._uU(12,"Cant. Items en contenedor"),t.qZA(),t.TgZ(13,"th",5),t._uU(14,"Cant. de Contenedores"),t.qZA(),t.TgZ(15,"th",5),t._uU(16,"Uni. Medida"),t.qZA(),t.TgZ(17,"th",5),t._uU(18,"Contenedor Abierto?"),t.qZA(),t._UZ(19,"th"),t.qZA(),t.qZA(),t.TgZ(20,"tbody",6),t.YNc(21,E,33,2,"tr",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"button",8),t.NdJ("click",function(){return o.addFormInventario()}),t._uU(23," Agregar "),t.qZA(),t.TgZ(24,"mat-dialog-actions",9),t.TgZ(25,"button",10),t._uU(26," cerrar "),t.qZA(),t.TgZ(27,"button",11),t.YNc(28,R,1,0,"i",12),t._uU(29," Guardar Cambios "),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Q6J("formGroup",o.formValues),t.xp6(19),t.Q6J("ngForOf",o.getNewStock().controls),t.xp6(1),t.Q6J("disabled","submitted"===o.submitState),t.xp6(3),t.Q6J("disabled","submitted"===o.submitState),t.xp6(2),t.Q6J("disabled","submitted"===o.submitState||o.formValues.invalid),t.xp6(1),t.Q6J("ngIf","submitted"===o.submitState))},directives:[d.uh,c._Y,c.JL,c.sg,d.xY,c.CE,l.sg,c.x0,c.EJ,c.JJ,c.u,c.YN,c.Kr,c.wV,c.Fj,c.Wl,d.H8,d.ZT,l.O5],styles:[""]}),e})();function j(e,i){1&e&&(t.ynx(0),t._uU(1," El retiro tiene que ser mayor a 0 "),t.BQk())}function H(e,i){1&e&&(t.ynx(0),t._uU(1," No hay suficiente stock para llevar esa cantidad "),t.BQk())}function L(e,i){if(1&e&&(t.TgZ(0,"div",14),t.YNc(1,j,2,0,"ng-container",15),t.YNc(2,H,2,0,"ng-container",15),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.getControl("cantidadQueRetira").value<=0),t.xp6(1),t.Q6J("ngIf",n.getControl("cantidadQueRetira").value>n.data.TotalInventario)}}const B=function(e){return{"is-invalid":e}};let G=(()=>{class e{constructor(n,o,r){this.data=n,this.MatDialogRef=o,this.FormBuilder=r,this.AvailableStock=+this.data.TotalInventario,this.AvailableStock+=n.TotalInventario,this.formData=this.FormBuilder.group({cantidadQueRetira:[0,[c.kI.required,c.kI.max(this.data.TotalInventario),c.kI.min(1)]]})}ngOnInit(){}getControl(n){return this.formData.controls[n]}DiscountStock(n,o){let r=[...o];return r=r.reduceRight((a,s)=>{if(n>0){if("Unidades sueltas"===s.tipo_contenedor){if(s.unidades_en_contenedor===n)return n=0,a;if(s.unidades_en_contenedor>n)return s.unidades_en_contenedor-=n,n=0,a.push(s),a;if(s.unidades_en_contenedor<n)return n-=s.unidades_en_contenedor,a}if(1===s.cantidad_de_contenedor){if(s.unidades_en_contenedor>n)return s.esta_abierto?(s.unidades_en_contenedor-=n,n=0,a.push(s),a):(s.unidades_en_contenedor-=n,s.esta_abierto=!0,n=0,a.push(s),a);if(s.unidades_en_contenedor<n)return n-=s.unidades_en_contenedor,a;if(s.unidades_en_contenedor===n)return n=0,a}for(;s.cantidad_de_contenedor>1||n>0;){if(s.unidades_en_contenedor>n){if(s.esta_abierto)return s.unidades_en_contenedor-=n,n=0,a.push(s),a;s.cantidad_de_contenedor-=1,a.push(s);const p=Object.assign(Object.assign({},s),{cantidad_de_contenedor:1});return p.unidades_en_contenedor-=n,n=0,p.esta_abierto=!0,a.push(p),a}if(s.unidades_en_contenedor<n)return s.cantidad_de_contenedor-=1,n-=s.unidades_en_contenedor,s.esta_abierto=!0,s.unidades_en_contenedor-=n,s.unidades_en_contenedor>0&&a.push(s),a;if(s.unidades_en_contenedor===n)return s.cantidad_de_contenedor-=1,n=0,a.push(s),a}}return s.unidades_en_contenedor>0&&a.unshift(s),a},[]),r}save(){if(this.formData.invalid)return;this.data.Inventario=this.DiscountStock(this.formData.value.cantidadQueRetira,this.data.Inventario);let o=0;switch(this.data.Inventario.forEach(r=>{o+="Unidades sueltas"!==r.tipo_contenedor?r.unidades_en_contenedor*r.cantidad_de_contenedor:r.unidades_en_contenedor}),this.data.TotalInventario=o,!0){case o<this.data.Cant_poco_stock&&o>0:this.data.InventoryState="Poco Stock";break;case 0===o:this.data.InventoryState="Sin Stock",this.data.TotalInventario=0;break;default:this.data.InventoryState="Stock Suficiente"}this.MatDialogRef.close(this.formData.value)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.WI),t.Y36(d.so),t.Y36(c.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-retirar-dialog"]],decls:20,vars:8,consts:[["matDialogTitle","",1,"m-0","text-center"],[1,"badge","bg-primary","mb-1","fw-normal","d-block","text-wrap"],[1,"mt-0"],[3,"formGroup","ngSubmit"],[1,"mat-typography","pb-1"],[1,"mb-3","text-center","text-success","fs-6"],[1,"mb-3","animate__animated","animate__fadeInDown"],[1,"form-label"],["type","number","formControlName","cantidadQueRetira",1,"form-control","form-control-sm",3,"ngClass"],["class","invalid-feedback animate__animated animate__fadeIn",4,"ngIf"],["align","end"],["type","button","matDialogClose","",1,"btn","btn-light","btn-sm","mx-1"],["type","submit",1,"btn","btn-primary","btn-sm","text-center",3,"disabled"],[1,"fas","fa-cart-plus"],[1,"invalid-feedback","animate__animated","animate__fadeIn"],[4,"ngIf"]],template:function(n,o){1&n&&(t.TgZ(0,"h4",0),t._uU(1," Retirar stock "),t.TgZ(2,"div",1),t._uU(3),t.qZA(),t.qZA(),t._UZ(4,"hr",2),t.TgZ(5,"form",3),t.NdJ("ngSubmit",function(){return o.save()}),t.TgZ(6,"mat-dialog-content",4),t.TgZ(7,"div",5),t._uU(8),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"label",7),t._uU(11,"\xbfCuantas unidades va llevarse?"),t.qZA(),t._UZ(12,"input",8),t.YNc(13,L,3,2,"div",9),t.qZA(),t.qZA(),t.TgZ(14,"mat-dialog-actions",10),t.TgZ(15,"button",11),t._uU(16," cancelar "),t.qZA(),t.TgZ(17,"button",12),t._UZ(18,"i",13),t._uU(19," Al Carrito "),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(o.data.Nombre),t.xp6(2),t.Q6J("formGroup",o.formData),t.xp6(3),t.hij(" Hay disponible ",o.data.TotalInventario," unidades "),t.xp6(4),t.Q6J("ngClass",t.VKq(6,B,o.getControl("cantidadQueRetira").touched&&o.getControl("cantidadQueRetira").invalid)),t.xp6(1),t.Q6J("ngIf",o.getControl("cantidadQueRetira").touched&&o.getControl("cantidadQueRetira").invalid),t.xp6(4),t.Q6J("disabled",o.formData.invalid))},directives:[d.uh,c._Y,c.JL,c.sg,d.xY,c.wV,c.Fj,c.JJ,c.u,l.mk,l.O5,d.H8,d.ZT],styles:[""]}),e})();var z=g(8662);function V(e,i){1&e&&(t.TgZ(0,"div",5),t._uU(1," Todavia no hay ningun item agregado al carrito\n"),t.qZA())}function $(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"div",9),t._UZ(2,"img",10),t.qZA(),t.TgZ(3,"div",11),t.TgZ(4,"div",12),t.TgZ(5,"div"),t._uU(6),t.qZA(),t.TgZ(7,"div",13),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"div",14),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"div",15),t.TgZ(12,"button",16),t.NdJ("click",function(){const r=t.CHM(n),a=r.$implicit,s=r.index;return t.oxw(2).deleteItemFromCart(a,s)}),t._UZ(13,"i",17),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=i.$implicit,o=t.oxw(2);t.xp6(2),t.Q6J("src",o.Environment+"/"+n.imgURL,t.LSH),t.xp6(4),t.Oqu(n.nombre),t.xp6(2),t.Oqu(n.referencia),t.xp6(2),t.hij(" ",n.retiro.cantidadQueRetira," unidades ")}}function K(e,i){if(1&e&&(t.TgZ(0,"div",6),t.YNc(1,$,14,4,"div",7),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.data)}}function X(e,i){1&e&&(t.TgZ(0,"div",29),t.TgZ(1,"label",20),t._uU(2,"Nombre"),t.qZA(),t._UZ(3,"input",30),t.qZA())}function W(e,i){1&e&&t._UZ(0,"i",31)}const tt=function(e){return{status:null,itemsToIgnore:e}};function nt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"form",18),t.NdJ("ngSubmit",function(){return t.CHM(n),t.oxw().SubmitData()}),t.TgZ(1,"div",19),t.TgZ(2,"label",20),t._uU(3,"\xbfPara qui\xe9n es el retiro?"),t.qZA(),t.TgZ(4,"select",21),t.TgZ(5,"option",22),t._uU(6,"Obra"),t.qZA(),t.TgZ(7,"option",23),t._uU(8,"Empleado"),t.qZA(),t.qZA(),t.qZA(),t.YNc(9,X,4,0,"div",24),t.TgZ(10,"mat-dialog-actions",25),t.TgZ(11,"button",26),t._uU(12," cancelar "),t.qZA(),t.TgZ(13,"button",27),t.YNc(14,W,1,0,"i",28),t._uU(15," retirar "),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("formGroup",n.formData),t.xp6(9),t.Q6J("ngIf",n.getControl("paraQuienRetira").valid),t.xp6(2),t.Q6J("matDialogClose",t.VKq(6,tt,n.itemsToNoChange))("disabled","submitted"===n.state),t.xp6(2),t.Q6J("disabled",n.formData.invalid||"submitted"===n.state),t.xp6(1),t.Q6J("ngIf","submitted"===n.state)}}let et=(()=>{class e{constructor(n=[],o,r,a,s,p){this.data=n,this.MatDialogRef=o,this.fb=r,this.InventoryService=a,this.InventoryNotificationService=s,this.webSockets=p,this.state="waiting",this.formData=this.fb.group({paraQuienRetira:["",c.kI.required],nombreQuienRetira:["",c.kI.required]}),this.itemsToNoChange=[],this.Environment=_.N.server_uri}ngOnInit(){this.MatDialogRef.backdropClick().subscribe(n=>{this.MatDialogRef.close({status:null,itemsToIgnore:this.itemsToNoChange})})}getControl(n){return this.formData.controls[n]}deleteItemFromCart(n,o){this.itemsToNoChange.push(n),this.data.splice(o,1),this.data.length<=0&&this.MatDialogRef.close({status:null,itemsToIgnore:this.itemsToNoChange})}SubmitData(){if(this.formData.invalid)return;const n=Object.assign(Object.assign({},this.formData.value),{itemsToIgnore:this.itemsToNoChange,itemsRetirados:this.data});this.InventoryNotificationService.ConfirmRemoveInventory(n).then(o=>{o.isConfirmed&&(this.state="submitted",this.InventoryService.removeFromInventory(n).subscribe(r=>{this.state="waiting",this.MatDialogRef.close(Object.assign({itemsToIgnore:n.itemsToIgnore},r))}))})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.WI),t.Y36(d.so),t.Y36(c.qu),t.Y36(u.V),t.Y36(v.O),t.Y36(z.l))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-cart-items-list-dialog"]],decls:6,vars:3,consts:[["matDialogTitle","",1,"m-2","text-center"],["class","alert alert-warning text-center","role","alert",4,"ngIf"],[1,"mat-typography"],["class","items-list",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["role","alert",1,"alert","alert-warning","text-center"],[1,"items-list"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[1,"item-img-reference"],[3,"src"],[1,"item-detail"],[1,"item-nombre-referencia"],[1,"text-muted"],[1,"item-cantidad-retiro"],[1,"item-delete"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash-alt"],[3,"formGroup","ngSubmit"],[1,"mb-3","mt-2","animate__animated","animate__fadeInDown"],[1,"form-label"],["formControlName","paraQuienRetira",1,"form-select","form-select-sm"],["value","Obra"],["value","Empleado"],["class","mb-3 animate__animated animate__fadeInDown",4,"ngIf"],["align","end"],["type","button",1,"btn","btn-light","btn-sm","mx-1",3,"matDialogClose","disabled"],["type","submit",1,"btn","btn-primary","btn-sm","text-center",3,"disabled"],["class","fas fa-sync-alt fa-spin",4,"ngIf"],[1,"mb-3","animate__animated","animate__fadeInDown"],["type","text","formControlName","nombreQuienRetira",1,"form-control","form-control-sm"],[1,"fas","fa-sync-alt","fa-spin"]],template:function(n,o){1&n&&(t.TgZ(0,"h4",0),t._uU(1,"Carrito de Retiros"),t.qZA(),t.YNc(2,V,2,0,"div",1),t.TgZ(3,"mat-dialog-content",2),t.YNc(4,K,2,1,"div",3),t.qZA(),t.YNc(5,nt,16,8,"form",4)),2&n&&(t.xp6(2),t.Q6J("ngIf",o.data.length<=0),t.xp6(2),t.Q6J("ngIf",o.data.length>0),t.xp6(1),t.Q6J("ngIf",o.data.length>0&&"waiting"===o.state||"submitted"===o.state))},directives:[d.uh,l.O5,d.xY,l.sg,c._Y,c.JL,c.sg,c.EJ,c.JJ,c.u,c.YN,c.Kr,c.Fj,d.H8,d.ZT],styles:["[_nghost-%COMP%]{display:grid;width:100%;height:100%}.items-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-auto-columns:1fr;width:100%;max-height:350px}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:grid;width:100%;grid-template-columns:60px 1fr max-content;grid-template-rows:1fr;grid-gap:.3rem;gap:.3rem}@media (max-width: 768px){.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{font-size:10px}}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .item-img-reference[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .item-img-reference[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .item-detail[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;justify-content:space-between;align-items:center}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .item-delete[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:.3rem .8rem}.retiro-exitoso[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;gap:.1rem}.retiro-exitoso[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.retiro-exitoso[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:70px!important;color:var(--bs-success)}"]}),e})();var ot=g(5561);function it(e,i){1&e&&(t.TgZ(0,"div",5),t._uU(1," Todavia no se registraron cambios aqui. "),t.qZA())}function rt(e,i){if(1&e&&(t.TgZ(0,"div",6),t._uU(1),t.TgZ(2,"div",7),t._uU(3),t.ALo(4,"dayJS"),t.qZA(),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.detail," "),t.xp6(2),t.Oqu(t.lcZ(4,2,n.date))}}let at=(()=>{class e{constructor(n,o){this.InventoryID=n,this.inventoryService=o,this.Events=[]}ngOnInit(){this.inventoryService.getInventoryHistory(this.InventoryID).subscribe(n=>this.Events=n)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.WI),t.Y36(u.V))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-inventory-history-dialog"]],decls:6,vars:2,consts:[["matDialogTitle","",1,"text-center"],[1,"mat-typography"],["class","alert alert-info fw-bold",4,"ngIf"],[1,"events"],["class","alert alert-success",4,"ngFor","ngForOf"],[1,"alert","alert-info","fw-bold"],[1,"alert","alert-success"],[1,"badge","bg-primary","date","fw-normal"]],template:function(n,o){1&n&&(t.TgZ(0,"h5",0),t._uU(1," Historial de cambios en este inventario\n"),t.qZA(),t.TgZ(2,"mat-dialog-content",1),t.YNc(3,it,2,0,"div",2),t.TgZ(4,"div",3),t.YNc(5,rt,5,4,"div",4),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Q6J("ngIf",o.Events.length<=0),t.xp6(2),t.Q6J("ngForOf",o.Events))},directives:[d.uh,d.xY,l.O5,l.sg],pipes:[ot.N],styles:[""]}),e})();function ct(e,i){1&e&&(t.ynx(0),t.TgZ(1,"div",2),t._uU(2,"No hay ningun item para mostrar"),t.qZA(),t.BQk())}function st(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const n=t.oxw(3);t.xp6(1),t.hij(" ",n.inventory.esta_abierto?"abiertas":"selladas"," ")}}function lt(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const n=t.oxw(3);t.xp6(1),t.hij(" ",n.inventory.esta_abierto?"abierta":"sellada"," ")}}function dt(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.YNc(2,st,2,1,"ng-container",3),t.YNc(3,lt,2,1,"ng-container",3),t._uU(4),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.AsE(" ",n.inventory.cantidad_de_contenedor," ",n.inventory.cantidad_de_contenedor>1?"cajas":"caja"," "),t.xp6(1),t.Q6J("ngIf",n.inventory.cantidad_de_contenedor>1),t.xp6(1),t.Q6J("ngIf",1===n.inventory.cantidad_de_contenedor),t.xp6(1),t.AsE(" con ",n.inventory.unidades_en_contenedor," ",n.inventory.unidades_en_contenedor>1?"unidades":"unidad"," ")}}function gt(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.AsE(" ",n.inventory.unidades_en_contenedor," ",n.inventory.unidades_en_contenedor>1?"unidades sueltas":"unidad suelta"," ")}}function mt(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const n=t.oxw(3);t.xp6(1),t.hij(" ",n.inventory.esta_abierto?"abiertas":"selladas"," ")}}function pt(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const n=t.oxw(3);t.xp6(1),t.hij(" ",n.inventory.esta_abierto?"abierta":"sellada"," ")}}function _t(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.YNc(2,mt,2,1,"ng-container",3),t.YNc(3,pt,2,1,"ng-container",3),t._uU(4),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.AsE(" ",n.inventory.cantidad_de_contenedor," ",n.inventory.cantidad_de_contenedor>1?"bolsas":"bolsa"," "),t.xp6(1),t.Q6J("ngIf",n.inventory.cantidad_de_contenedor>1),t.xp6(1),t.Q6J("ngIf",1===n.inventory.cantidad_de_contenedor),t.xp6(1),t.AsE(" con ",n.inventory.unidades_en_contenedor," ",n.inventory.unidades_en_contenedor>1?"unidades":"unidad"," ")}}function ut(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const n=t.oxw(3);t.xp6(1),t.hij(" ",n.inventory.esta_abierto?"abierto":"sellado"," ")}}function ft(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const n=t.oxw(3);t.xp6(1),t.hij(" ",n.inventory.esta_abierto?"abierto":"sellado"," ")}}function vt(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.YNc(2,ut,2,1,"ng-container",3),t.YNc(3,ft,2,1,"ng-container",3),t._uU(4),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.AsE(" ",n.inventory.cantidad_de_contenedor," ",n.inventory.cantidad_de_contenedor>1?"rollos":"rollo"," "),t.xp6(1),t.Q6J("ngIf",n.inventory.cantidad_de_contenedor>1),t.xp6(1),t.Q6J("ngIf",1===n.inventory.cantidad_de_contenedor),t.xp6(1),t.AsE(" ",n.inventory.unidades_en_contenedor," con ",n.inventory.unidad_medida," ")}}function ht(e,i){if(1&e&&(t.YNc(0,dt,5,6,"ng-container",3),t.YNc(1,gt,2,2,"ng-container",3),t.YNc(2,_t,5,6,"ng-container",3),t.YNc(3,vt,5,6,"ng-container",3)),2&e){const n=t.oxw();t.Q6J("ngIf","Caja"===n.inventory.tipo_contenedor),t.xp6(1),t.Q6J("ngIf","Unidades sueltas"===n.inventory.tipo_contenedor),t.xp6(1),t.Q6J("ngIf","Bolsa"===n.inventory.tipo_contenedor),t.xp6(1),t.Q6J("ngIf","Rollo"===n.inventory.tipo_contenedor)}}let O=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-inventory-item"]],inputs:{inventory:"inventory"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"alert","alert-warning"],[4,"ngIf"]],template:function(n,o){if(1&n&&(t.YNc(0,ct,3,0,"ng-container",0),t.YNc(1,ht,4,4,"ng-template",null,1,t.W1O)),2&n){const r=t.MAs(2);t.Q6J("ngIf",null===o.inventory)("ngIfElse",r)}},directives:[l.O5],styles:[""]}),e})();const Ct=function(e){return{"active-tab":e}};function Zt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",27),t.NdJ("click",function(){const a=t.CHM(n).$implicit;return t.oxw().changeCategorie(a)}),t._uU(1),t.qZA()}if(2&e){const n=i.$implicit,o=t.oxw();t.Q6J("ngClass",t.VKq(2,Ct,o.activeTab===n)),t.xp6(1),t.hij(" ",n," ")}}function bt(e,i){if(1&e&&(t.TgZ(0,"span",28),t._uU(1),t.TgZ(2,"span",29),t._uU(3,"Retiros en el carrito"),t.qZA(),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.hij(" ",n.cart.length," ")}}function yt(e,i){if(1&e&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n," ")}}function xt(e,i){if(1&e&&(t.TgZ(0,"li",55),t._UZ(1,"app-inventory-item",56),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("inventory",n)}}const Tt=function(e,i,n){return{"bg-primary":e,"bg-warning":i,"bg-danger":n}},Mt=function(e,i,n){return{"text-primary":e,"text-warning":i,"text-danger":n}},Ot=function(e){return{disabled:e}};function Pt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",31),t.TgZ(1,"div",32),t._UZ(2,"img",33),t.qZA(),t.TgZ(3,"div",34),t.TgZ(4,"div",35),t.TgZ(5,"div",36),t._uU(6),t.qZA(),t.TgZ(7,"div",37),t.TgZ(8,"span",30),t._uU(9),t.qZA(),t.TgZ(10,"span",38),t._uU(11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",39),t.TgZ(13,"ul",40),t.YNc(14,xt,2,1,"li",41),t.qZA(),t.qZA(),t.TgZ(15,"div",42),t._uU(16),t.TgZ(17,"div",43),t.TgZ(18,"ul",44),t.TgZ(19,"li",45),t.NdJ("click",function(){const a=t.CHM(n).$implicit;return t.oxw().addToCart(a)}),t._UZ(20,"i",46),t.qZA(),t.TgZ(21,"li",47),t.NdJ("click",function(){const a=t.CHM(n).$implicit;return t.oxw().addInventarioToItem(a.Referencia,a.Nombre,a._id)}),t._UZ(22,"i",48),t.qZA(),t.TgZ(23,"li",49),t.NdJ("click",function(){const a=t.CHM(n).$implicit;return t.oxw().addInventory(a._id)}),t._UZ(24,"i",50),t.qZA(),t.TgZ(25,"li",51),t.NdJ("click",function(){const a=t.CHM(n).$implicit;return t.oxw().openHistoryDialog(a._id)}),t._UZ(26,"i",52),t.qZA(),t.TgZ(27,"li",53),t.NdJ("click",function(){const a=t.CHM(n).$implicit;return t.oxw().deleteItem(a._id)}),t._UZ(28,"i",54),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=i.$implicit,o=t.oxw();t.xp6(2),t.Q6J("src",o.Environment.server_uri+"/"+n.ImgRef,t.LSH),t.xp6(4),t.Oqu(n.Nombre),t.xp6(3),t.Oqu(n.Referencia),t.xp6(1),t.Q6J("ngClass",t.kEZ(10,Tt,"Stock Suficiente"===n.InventoryState,"Poco Stock"===n.InventoryState,"Sin Stock"===n.InventoryState)),t.xp6(1),t.hij(" ",n.InventoryState," "),t.xp6(3),t.Q6J("ngForOf",n.Inventario),t.xp6(1),t.Q6J("ngClass",t.kEZ(14,Mt,"Stock Suficiente"===n.InventoryState,"Poco Stock"===n.InventoryState,"Sin Stock"===n.InventoryState)),t.xp6(1),t.AsE(" En total: ",n.TotalInventario," ",n.TotalInventario>0?"unidades":"unidad"," "),t.xp6(3),t.Q6J("ngClass",t.VKq(18,Ot,"Sin Stock"===n.InventoryState))}}function It(e,i){1&e&&(t.TgZ(0,"div",57),t._uU(1," Cargando datos\n"),t.qZA())}const At=function(e){return{"btn-success":e}};let wt=(()=>{class e{constructor(n,o,r,a,s){this.MatDialog=n,this.InventoryStore=o,this.InventoryService=r,this.InventoryNotificationService=a,this.Router=s,this.tabs=["Todo","Sin Stock","Pa\xf1ol","Cajon cerrado"],this.activeTab="Todo",this.Inventory=[],this.InventoryFiltered=[],this.categories=[],this.cart=[],this.dataStatus="Data ready",this.InventoryStatus="with elements",this.Environment=_.N}ngOnInit(){this.InventoryStore.inventory$.subscribe(n=>{this.Inventory=n,this.InventoryFiltered=n,this.Inventory.forEach(o=>{this.categories.includes(o.Categoria.rubro)||this.categories.push(o.Categoria.rubro)})})}changeCategorie(n){({Todo:()=>{this.InventoryFiltered=[...this.Inventory],this.activeTab="Todo"},"Sin Stock":()=>{this.InventoryFiltered=this.Inventory.filter(r=>"Sin Stock"==r.InventoryState),this.activeTab="Sin Stock"},Pa\u00f1ol:()=>{this.activeTab=n,this.InventoryFiltered=this.Inventory.filter(r=>"Pa\xf1ol"===r.Ubicacion)},"Cajon cerrado":()=>{this.activeTab=n,this.InventoryFiltered=this.Inventory.filter(r=>"Cajon cerrado"===r.Ubicacion)}})[n]()}openImageOnDialog(){console.log("se hizo doble click en la imagen")}searchItem(n){n.length<=0||void 0===n?this.InventoryFiltered=[...this.Inventory]:(n=n.toLowerCase(),this.InventoryFiltered=this.Inventory.filter(o=>o.Nombre.toLowerCase().includes(n)||o.Referencia.toLowerCase().includes(n)||o.Categoria.rubro.toLocaleLowerCase().includes(n)))}addInventory(n){const o=["stock","CrearInventario"];n&&o.push(n),this.Router.navigate(o)}addToCart(n){this.SaveRecoverItemCopyFromCart("save",n),this.MatDialog.open(G,{data:n,width:"320px"}).afterClosed().subscribe(r=>{r&&this.cart.push({_id:n._id,referencia:n.Referencia,nombre:n.Nombre,retiro:r,imgURL:n.ImgRef})})}openCartDialog(){var n=this;this.MatDialog.open(et,{data:this.cart,width:"600px"}).afterClosed().subscribe(function(){var r=(0,h.Z)(function*(a){if(a){if(a.itemsToIgnore.length>0){const s=n.SaveRecoverItemCopyFromCart("retrieve");a.itemsToIgnore.forEach(p=>{const Z=n.InventoryFiltered.findIndex(b=>b.Referencia===p.referencia),an=s.find(b=>b.Referencia===p.referencia);n.InventoryFiltered[Z]=an})}null!==a.status&&(n.InventoryNotificationService.toastNotification(a.status?"success":"error",a.message),n.SaveRecoverItemCopyFromCart("deleteAll"),n.cart=[])}});return function(a){return r.apply(this,arguments)}}())}addInventarioToItem(n,o,r){this.MatDialog.open(Y,{data:{nombre:o,reference:n,_id:r}}).afterClosed().subscribe(s=>{!s||this.InventoryNotificationService.toastNotification(!0===s.status?"success":"error",s.message)})}openExcel(n){return(0,h.Z)(function*(){})()}deleteItem(n){this.InventoryStore.deleteInventory(n)}SaveRecoverItemCopyFromCart(n,o){return{save:()=>{const a=JSON.parse(localStorage.getItem("cartCopy"))||[];a.push(o),localStorage.setItem("cartCopy",JSON.stringify(a))},retrieve:()=>JSON.parse(localStorage.getItem("cartCopy")),delete:()=>{let a=JSON.parse(localStorage.getItem("cartCopy"))||[];a=a.filter(s=>s._id!==o._id),localStorage.setItem("cartCopy",JSON.stringify(a))},deleteAll:()=>{localStorage.setItem("cartCopy",JSON.stringify([]))}}[n]()}openHistoryDialog(n){this.MatDialog.open(at,{data:n})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.uw),t.Y36(f.P),t.Y36(u.V),t.Y36(v.O),t.Y36(m.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-inventory-main-page"]],decls:32,vars:8,consts:[[1,"nav-bar"],["class","nav-section user-select-none",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"table-data-controls"],[1,"input-finder"],[1,"icon"],[1,"fas","fa-search","text-secondary"],["type","text","placeholder","Buscar codigo, nombre, tipo de empaque, etc..",1,"form-control","form-control-sm","finder",3,"input"],["inputValue",""],[1,"button-group"],["type","button",1,"btn","btn-secondary","btn-sm","position-relative",3,"ngClass","click"],[1,"fas","fa-shopping-cart"],["class","position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger","style","z-index: 5;",4,"ngIf"],["id","buttons-excel",1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","btn-sm","dropdown-toggle"],[1,"fas","fa-file-import"],[1,"dropdown-menu"],[1,"dropdown-item",2,"cursor","pointer",3,"click"],["type","file","hidden","",3,"change"],["file",""],[1,"dropdown-item",2,"cursor","pointer"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"far","fa-file"],[1,"categories","d-flex","justify-content-start","align-items-center","gap-1",2,"overflow-x","auto"],["class","badge bg-secondary",4,"ngFor","ngForOf"],[1,"cards-inventory"],["class","card-inventory",4,"ngFor","ngForOf"],["class","alert alert-info","role","alert",4,"ngIf"],[1,"nav-section","user-select-none",3,"ngClass","click"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-danger",2,"z-index","5"],[1,"visually-hidden"],[1,"badge","bg-secondary"],[1,"card-inventory"],[1,"card-inventory-img"],["alt","",3,"src"],[1,"card-inventory-body"],[1,"card-inventory-header"],[1,"nombre"],[1,"codigo-estado"],[1,"badge",3,"ngClass"],[1,"card-inventory-details"],[1,"list-group","user-select-none"],["class","list-group-item text-lowercase p-2","style","min-width: max-content",4,"ngFor","ngForOf"],[1,"card-inventory-footer",3,"ngClass"],[1,"controls"],[1,"list-group","list-group-horizontal","flex-fill",2,"font-size","0.8rem","width","max-content"],["title","Agregar al carrito",1,"list-group-item","list-group-item-action","user-select-none",3,"ngClass","click"],[1,"fas","fa-cart-plus"],["title","Agregar stock",1,"list-group-item","list-group-item-action","user-select-none",2,"padding","8px",3,"click"],[1,"fas","fa-truck-loading"],["title","Editar inventario",1,"list-group-item","list-group-item-action","user-select-none",2,"padding","8px",3,"click"],[1,"far","fa-edit"],["title","Abrir historial de cambios",1,"list-group-item","list-group-item-action","user-select-none",2,"padding","8px",3,"click"],[1,"fas","fa-redo"],["title","Eliminar este item",1,"list-group-item","list-group-item-action","user-select-none",2,"padding","8px",3,"click"],[1,"fas","fa-trash-alt"],[1,"list-group-item","text-lowercase","p-2",2,"min-width","max-content"],[3,"inventory"],["role","alert",1,"alert","alert-info"]],template:function(n,o){if(1&n){const r=t.EpF();t.TgZ(0,"nav",0),t.YNc(1,Zt,2,4,"div",1),t.qZA(),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t._UZ(5,"i",5),t.qZA(),t.TgZ(6,"input",6,7),t.NdJ("input",function(){t.CHM(r);const s=t.MAs(7);return o.searchItem(s.value)}),t.qZA(),t.qZA(),t.TgZ(8,"div",8),t.TgZ(9,"button",9),t.NdJ("click",function(){return o.openCartDialog()}),t._UZ(10,"i",10),t._uU(11," Carrito "),t.YNc(12,bt,4,1,"span",11),t.qZA(),t.TgZ(13,"div",12),t.TgZ(14,"button",13),t._UZ(15,"i",14),t._uU(16," Importar/Exportar "),t.qZA(),t.TgZ(17,"ul",15),t.TgZ(18,"li",16),t.NdJ("click",function(){return t.CHM(r),t.MAs(20).click()}),t.TgZ(19,"input",17,18),t.NdJ("change",function(){t.CHM(r);const s=t.MAs(20);return o.openExcel(s)}),t.qZA(),t._uU(21," Importar Excel "),t.qZA(),t.TgZ(22,"li",19),t._uU(23," Exportar como Excel "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"button",20),t.NdJ("click",function(){return o.addInventory()}),t._UZ(25,"i",21),t._uU(26," Nuevo "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",22),t.YNc(28,yt,2,1,"span",23),t.qZA(),t.TgZ(29,"div",24),t.YNc(30,Pt,29,20,"div",25),t.qZA(),t.YNc(31,It,2,0,"div",26)}2&n&&(t.xp6(1),t.Q6J("ngForOf",o.tabs),t.xp6(8),t.Q6J("ngClass",t.VKq(6,At,o.cart.length>0)),t.xp6(3),t.Q6J("ngIf",o.cart.length>0),t.xp6(16),t.Q6J("ngForOf",o.categories),t.xp6(2),t.Q6J("ngForOf",o.InventoryFiltered),t.xp6(1),t.Q6J("ngIf","Cargando"===o.dataStatus))},directives:[l.sg,l.mk,l.O5,O],styles:["[_nghost-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1fr;grid-template-rows:repeat(3,max-content) 1fr;overflow-y:auto;grid-gap:.5rem;gap:.5rem}header.header[_ngcontent-%COMP%]{display:flex;color:#061729;font-style:italic;gap:.5rem}header.header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e6e6e6;text-decoration:none;cursor:default}header.header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   h4.active[_ngcontent-%COMP%]{color:#03162e}nav.nav-bar[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;width:100%;flex-wrap:wrap;box-shadow:inset 0 -2px #e6e6e6;gap:.5rem}nav.nav-bar[_ngcontent-%COMP%]   .nav-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;color:#fff;padding:10px}nav.nav-bar[_ngcontent-%COMP%]   .nav-section.active-tab[_ngcontent-%COMP%]{color:var(--bs-warning);border-bottom:2px solid var(--bs-warning)}.table-data-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr max-content;grid-gap:1rem;gap:1rem}@media (max-width: 992px){.table-data-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%] > #buttons-excel[_ngcontent-%COMP%]{display:none}}.table-data-controls[_ngcontent-%COMP%]   .input-finder[_ngcontent-%COMP%]{position:relative}.table-data-controls[_ngcontent-%COMP%]   .input-finder[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;width:30px;height:100%;left:0px;top:0px;display:flex;justify-content:center;align-items:center}.table-data-controls[_ngcontent-%COMP%]   .input-finder[_ngcontent-%COMP%]   .finder[_ngcontent-%COMP%]{padding-left:30px!important}.table-data-controls[_ngcontent-%COMP%]   .input-finder[_ngcontent-%COMP%]   .finder[_ngcontent-%COMP%]:focus   .input-finder[_ngcontent-%COMP%] > .icon[_ngcontent-%COMP%]{color:red!important}.table-data-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;gap:.3rem}.cards-inventory[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:repeat(auto-fill,minmax(min(15rem,100%),1fr));grid-auto-rows:max-content;grid-auto-flow:row;grid-gap:.5rem;gap:.5rem;overflow-y:auto}.cards-inventory[_ngcontent-%COMP%]   .card-inventory[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:5rem 1fr;grid-template-rows:100%;border:1px solid var(--bs-light);border-radius:5px;background-color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cards-inventory[_ngcontent-%COMP%]   .card-inventory[_ngcontent-%COMP%]   .card-inventory-img[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;align-items:center;justify-content:center;background-color:#fff;border-radius:8px 0 0 8px;z-index:2}.cards-inventory[_ngcontent-%COMP%]   .card-inventory[_ngcontent-%COMP%]   .card-inventory-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;object-fit:contain;padding:.5rem;max-height:100px}.cards-inventory[_ngcontent-%COMP%]   .card-inventory[_ngcontent-%COMP%]   .card-inventory-body[_ngcontent-%COMP%]{position:relative;display:grid;width:100%;height:100%;grid-template-columns:100%;grid-template-rows:max-content 1fr max-content;background-color:#fff;border-radius:0 8px 8px 0}.cards-inventory[_ngcontent-%COMP%]   .card-inventory[_ngcontent-%COMP%]   .card-inventory-body[_ngcontent-%COMP%]:hover   .card-inventory-footer[_ngcontent-%COMP%]{display:flex}.cards-inventory[_ngcontent-%COMP%]   .card-inventory[_ngcontent-%COMP%]   .card-inventory-body[_ngcontent-%COMP%]   .card-inventory-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;justify-content:center;align-items:center;overflow:hidden}.cards-inventory[_ngcontent-%COMP%]   .card-inventory[_ngcontent-%COMP%]   .card-inventory-body[_ngcontent-%COMP%]   .card-inventory-header[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{display:block;width:100%;font-size:14px;text-align:center;padding:.2rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cards-inventory[_ngcontent-%COMP%]   .card-inventory[_ngcontent-%COMP%]   .card-inventory-body[_ngcontent-%COMP%]   .card-inventory-header[_ngcontent-%COMP%]   .codigo-estado[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center;align-items:center;gap:.3rem}.cards-inventory[_ngcontent-%COMP%]   .card-inventory[_ngcontent-%COMP%]   .card-inventory-body[_ngcontent-%COMP%]   .card-inventory-details[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;width:100%;height:100%;padding:.2rem}.cards-inventory[_ngcontent-%COMP%]   .card-inventory[_ngcontent-%COMP%]   .card-inventory-body[_ngcontent-%COMP%]   .card-inventory-details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:100%}.cards-inventory[_ngcontent-%COMP%]   .card-inventory[_ngcontent-%COMP%]   .card-inventory-body[_ngcontent-%COMP%]   .card-inventory-details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border:none!important;padding:0!important}.cards-inventory[_ngcontent-%COMP%]   .card-inventory[_ngcontent-%COMP%]   .card-inventory-body[_ngcontent-%COMP%]   .card-inventory-footer[_ngcontent-%COMP%]{position:relative;display:flex;width:100%;justify-content:center;align-items:center;padding:.3rem;border-radius:0 0 5px}.cards-inventory[_ngcontent-%COMP%]   .card-inventory[_ngcontent-%COMP%]   .card-inventory-body[_ngcontent-%COMP%]   .card-inventory-footer[_ngcontent-%COMP%]:hover   .controls[_ngcontent-%COMP%]{display:flex}.cards-inventory[_ngcontent-%COMP%]   .card-inventory[_ngcontent-%COMP%]   .card-inventory-body[_ngcontent-%COMP%]   .card-inventory-footer[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{position:absolute;bottom:0px;left:0px;display:none;width:100%;justify-content:center;align-items:center;background-color:var(--bs-warning);z-index:2;border-radius:5px;border:2px solid var(--bs-purple)}.cards-inventory[_ngcontent-%COMP%]   .card-inventory[_ngcontent-%COMP%]   .card-inventory-body[_ngcontent-%COMP%]   .card-inventory-footer[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:center;background-color:transparent;padding:.3rem!important;color:#fff;border:none!important}"]}),e})();function kt(e,i){1&e&&t._UZ(0,"i",6)}let qt=(()=>{class e{constructor(n){this.InventoryStore=n,this.lowStock=0}ngOnInit(){this.InventoryStore.inventory$.subscribe(n=>this.lowStock=n.filter(o=>"Poco Stock"===o.InventoryState).length)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.P))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-main-page"]],decls:10,vars:1,consts:[[1,"inventory-header"],["routerLink","GestionInventario","routerLinkActive","active"],["routerLink","Gestionar-Herramientas","routerLinkActive","active"],["routerLink","Reporte","routerLinkActive","active",2,"position","relative"],["id","stock-indicator","class","fas fa-exclamation-circle text-warning",4,"ngIf"],[1,"page-wrapper"],["id","stock-indicator",1,"fas","fa-exclamation-circle","text-warning"]],template:function(n,o){1&n&&(t.TgZ(0,"header",0),t.TgZ(1,"a",1),t._uU(2,"Gesti\xf3n de inventario"),t.qZA(),t.TgZ(3,"a",2),t._uU(4,"Gesti\xf3n de herramientas"),t.qZA(),t.TgZ(5,"a",3),t._uU(6,"Reporte "),t.YNc(7,kt,1,0,"i",4),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t._UZ(9,"router-outlet"),t.qZA()),2&n&&(t.xp6(7),t.Q6J("ngIf",o.lowStock>0))},directives:[m.yS,m.Od,l.O5,m.lC],styles:["[_nghost-%COMP%]{display:grid;width:100%;height:100%;padding:.8rem;grid-template-columns:100%;grid-template-rows:max-content 1fr;background:linear-gradient(to bottom,#606c88,#3f4c6b);border-radius:5px;box-shadow:0 0 11px #ccc}header.inventory-header[_ngcontent-%COMP%]{display:flex;color:#061729;font-style:italic;font-size:1.2rem;justify-content:flex-start;padding:.2rem}@media (max-width: 768px){header.inventory-header[_ngcontent-%COMP%]{font-size:.7rem}}header.inventory-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:max-content;color:#e6e6e6;text-decoration:none;cursor:default}header.inventory-header[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--bs-warning)}header.inventory-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:-8px;right:0px}.page-wrapper[_ngcontent-%COMP%]{display:block;width:100%;height:100%;overflow-y:auto}"]}),e})();var Ut=g(3583),St=g(5226),Nt=g.n(St);const Ft=["report"];function Jt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){return t.CHM(n),t.oxw().imprimir()}),t._uU(1," Imprimir "),t.qZA()}}function Dt(e,i){if(1&e&&(t.TgZ(0,"li"),t._UZ(1,"app-inventory-item",23),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("inventory",n)}}function Qt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",24),t._UZ(1,"i",25),t.TgZ(2,"ul",26),t.TgZ(3,"li"),t.TgZ(4,"a",27),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit;return t.oxw().changeMinimumUnits(r._id)}),t._uU(5,"Cambiar unidades minimas"),t.qZA(),t.qZA(),t.TgZ(6,"li"),t.TgZ(7,"a",27),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit;return t.oxw().removeFromList(r._id,"lowStock")}),t._uU(8,"Eliminar de la lista"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function Et(e,i){if(1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"div",16),t._UZ(3,"img",17),t.qZA(),t.qZA(),t.TgZ(4,"th",18),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"ul"),t.YNc(10,Dt,2,1,"li",11),t.qZA(),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t.TgZ(14,"div",19),t.TgZ(15,"span",20),t._uU(16),t.qZA(),t.TgZ(17,"span",21),t._uU(18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"td"),t.YNc(20,Qt,9,0,"div",22),t.qZA(),t.qZA()),2&e){const n=i.$implicit,o=t.oxw();t.xp6(3),t.Q6J("src",o.Environment.server_uri+"/"+n.ImgRef,t.LSH),t.xp6(2),t.Oqu(n.Referencia),t.xp6(2),t.Oqu(n.Nombre),t.xp6(3),t.Q6J("ngForOf",n.Inventario),t.xp6(2),t.Oqu(n.TotalInventario),t.xp6(4),t.AsE("Cantidad total: ",n.TotalInventario," ",n.TotalInventario>1?"unidades":"unidad",""),t.xp6(2),t.hij("Se requieren un minimo de ",n.Cant_poco_stock," unidades."),t.xp6(2),t.Q6J("ngIf",!o.printingPDF)}}function Rt(e,i){if(1&e&&(t.TgZ(0,"li"),t._UZ(1,"app-inventory-item",23),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("inventory",n)}}function Yt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",24),t._UZ(1,"i",25),t.TgZ(2,"ul",26),t.TgZ(3,"li"),t.TgZ(4,"a",27),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit;return t.oxw().removeFromList(r._id,"outStock")}),t._uU(5,"Eliminar de la lista"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function jt(e,i){if(1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"div",16),t._UZ(3,"img",17),t.qZA(),t.qZA(),t.TgZ(4,"th",18),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"ul"),t.YNc(10,Rt,2,1,"li",11),t.qZA(),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t.TgZ(14,"div",19),t.TgZ(15,"span",20),t._uU(16),t.qZA(),t.TgZ(17,"span",21),t._uU(18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"td"),t.YNc(20,Yt,6,0,"div",22),t.qZA(),t.qZA()),2&e){const n=i.$implicit,o=t.oxw();t.xp6(3),t.Q6J("src",o.Environment.server_uri+"/"+n.ImgRef,t.LSH),t.xp6(2),t.Oqu(n.Referencia),t.xp6(2),t.Oqu(n.Nombre),t.xp6(3),t.Q6J("ngForOf",n.Inventario),t.xp6(2),t.Oqu(n.TotalInventario),t.xp6(4),t.AsE("Cantidad total: ",n.TotalInventario," ",n.TotalInventario>1?"unidades":"unidad",""),t.xp6(2),t.hij("Se requieren un minimo de ",n.Cant_poco_stock," unidades."),t.xp6(2),t.Q6J("ngIf",!o.printingPDF)}}let Ht=(()=>{class e{constructor(n){this.inventoryStore=n,this.lowStock=[],this.outStock=[],this.printingPDF=!1,this.Environment=_.N}ngOnInit(){this.inventoryStore.inventory$.subscribe(n=>{this.lowStock=n.filter(o=>"Poco Stock"===o.InventoryState),this.outStock=n.filter(o=>"Sin Stock"===o.InventoryState),console.log(this.lowStock),console.log(this.outStock)})}imprimir(){this.printingPDF=!this.printingPDF,setTimeout(()=>{const n=new Ut.kH("p","px","a4");n.html(this.report.nativeElement,{html2canvas:{scale:(n.internal.pageSize.width-20)/this.report.nativeElement.scrollWidth},x:10,y:10,autoPaging:"text",callback:()=>{this.printingPDF=!1;const a=n.output("blob");window.open(URL.createObjectURL(a))}})},1e3)}changeMinimumUnits(n){Nt().mixin({customClass:{confirmButton:"btn btn-success  btn-sm me-1",cancelButton:"btn btn-danger btn-sm ",input:"form-control form-control-sm h-50 w-75 mx-auto"},buttonsStyling:!1}).fire({text:"Cual es el nuevo monto minimo de unidades?",input:"number",showCancelButton:!0,confirmButtonText:"Confirmar",cancelButtonText:"Cancelar",allowOutsideClick:!1,heightAuto:!1}).then(o=>{o.isConfirmed&&this.inventoryStore.changeMinumumStock(n,o.value)})}removeFromList(n,o){"lowStock"!=o?this.outStock=this.outStock.filter(r=>r._id!==n):this.lowStock=this.lowStock.filter(r=>r._id!==n)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.P))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-report-main-page"]],viewQuery:function(n,o){if(1&n&&t.Gf(Ft,5),2&n){let r;t.iGM(r=t.CRH())&&(o.report=r.first)}},decls:53,vars:3,consts:[[1,"wrapper"],["report",""],[1,"header"],[1,"m-0"],["class","btn btn-outline-success btn-sm",3,"click",4,"ngIf"],[1,"reports"],[1,"report","mb-1"],[1,"title","text-warning","border-warning"],[1,"body"],[1,"bg-warning"],["scope","col",2,"max-width","max-content"],[4,"ngFor","ngForOf"],[1,"report"],[1,"title","text-danger","border-danger"],[1,"bg-danger"],[1,"btn","btn-outline-success","btn-sm",3,"click"],[1,"item-img"],["loading","lazy",2,"width","100%","height","100%","background-color","#fff",3,"src"],["scope","row"],[1,"lowStockInventoryFooter"],[1,"text-dark","d-block"],[1,"text-danger","d-block"],["class","dropdown",4,"ngIf"],[3,"inventory"],[1,"dropdown"],["data-bs-toggle","dropdown","aria-expanded","false",1,"fas","fa-bars","text-dark",2,"font-size","25px"],[1,"dropdown-menu"],[1,"dropdown-item","user-select-none",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0,1),t.TgZ(2,"div",2),t.TgZ(3,"h4",3),t._uU(4,"Reporte de inventario"),t.qZA(),t.YNc(5,Jt,2,0,"button",4),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",7),t.TgZ(9,"h5",3),t._uU(10,"Inventario que esta por terminarse su stock"),t.qZA(),t.qZA(),t.TgZ(11,"div",8),t.TgZ(12,"table"),t.TgZ(13,"thead"),t.TgZ(14,"tr",9),t.TgZ(15,"th",10),t._uU(16," Img. Referencia "),t.qZA(),t.TgZ(17,"th"),t._uU(18,"#"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Nombre"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Inventario"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Cantidad total"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Observaciones"),t.qZA(),t._UZ(27,"th"),t.qZA(),t.qZA(),t.TgZ(28,"tbody"),t.YNc(29,Et,21,9,"tr",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",12),t.TgZ(31,"div",13),t.TgZ(32,"h5",3),t._uU(33,"Inventario que no tiene stock"),t.qZA(),t.qZA(),t.TgZ(34,"div",8),t.TgZ(35,"table"),t.TgZ(36,"thead"),t.TgZ(37,"tr",14),t.TgZ(38,"th",10),t._uU(39," Img. Referencia "),t.qZA(),t.TgZ(40,"th"),t._uU(41,"#"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"Nombre"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"Inventario"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"Cantidad total"),t.qZA(),t.TgZ(48,"th"),t._uU(49,"Observaciones"),t.qZA(),t._UZ(50,"th"),t.qZA(),t.qZA(),t.TgZ(51,"tbody"),t.YNc(52,jt,21,9,"tr",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(5),t.Q6J("ngIf",!o.printingPDF),t.xp6(24),t.Q6J("ngForOf",o.lowStock),t.xp6(23),t.Q6J("ngForOf",o.outStock))},directives:[l.O5,l.sg,O],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%;flex-direction:column;align-items:center;gap:.3rem}.wrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:grid;grid-template-columns:1fr;grid-template-rows:max-content 1fr;grid-gap:.3rem;gap:.3rem}.wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:.3rem;background-color:var(--bs-gray-300)}.wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]{display:flex;flex-direction:column}.wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;gap:.3rem}.wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:.2rem;border:2px solid;text-align:center}.wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{position:relative;border-collapse:collapse;height:max-content;font-size:.9em;width:100%;border-radius:5px 5px 0 0}.wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{color:#fff;text-align:left;font-weight:700}.wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;min-width:max-content}.wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #dddddd}.wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]{width:75px;height:75px;display:flex;justify-content:center;align-items:center;object-fit:cover;border:2px solid #e6e6e6;border-radius:5px}@media (max-width: 768px){.wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]{width:50px;height:50px}}.wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;border-radius:5px}.wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#009879!important;color:#fff!important}.wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-of-type(2):hover{color:#00f}.wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:last-child{display:flex;gap:.5rem;font-size:20px}.wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type{border-bottom:2px solid #009879}.wrapper[_ngcontent-%COMP%]   .reports[_ngcontent-%COMP%]   .report[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.active-row[_ngcontent-%COMP%]{font-weight:700;color:#009879}"]}),e})();function Lt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(n),t.oxw().AddNewTool()}),t._uU(1," Nueva Herramienta "),t.qZA()}}let C=(()=>{class e{constructor(n,o){this.FormBuilder=n,this.Router=o,this.HeaderTitle="",this.SearchKey=new t.vpe,this.SearchForm=this.FormBuilder.group({keyword:["",[c.kI.minLength(1),c.kI.required]]})}ngOnInit(){this.SearchForm.valueChanges.subscribe(n=>{n.keyword.length>0&&this.SearchKey.emit(n)})}AddNewTool(){this.Router.navigate(["stock","Gestionar-Herramientas","agregar-herramienta"])}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(c.qu),t.Y36(m.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-tools-manager-header"]],inputs:{HeaderTitle:"HeaderTitle"},outputs:{SearchKey:"SearchKey"},decls:9,vars:3,consts:[[1,"title"],[1,"control-bar"],[1,"input-finder",3,"formGroup"],[1,"icon"],[1,"fas","fa-search","text-secondary"],["type","text","placeholder","Buscar","formControlName","keyword",1,"form-control","form-control-sm","finder"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-success","btn-sm",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"header"),t.TgZ(1,"div",0),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"form",2),t.TgZ(5,"div",3),t._UZ(6,"i",4),t.qZA(),t._UZ(7,"input",5),t.qZA(),t.YNc(8,Lt,2,0,"button",6),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Oqu(o.HeaderTitle),t.xp6(2),t.Q6J("formGroup",o.SearchForm),t.xp6(4),t.Q6J("ngIf","Herramientas disponibles"===o.HeaderTitle))},directives:[c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,l.O5],styles:["[_nghost-%COMP%]{position:sticky;top:0px;display:flex;width:100%;z-index:2;padding-bottom:.5rem}header[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:25px;color:#fff;padding:.4rem 0px}@media (max-width: 576px){header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px}}"]}),e})(),Bt=(()=>{class e{constructor(){}ngOnInit(){}searchTool(n){console.log(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-herramientas-prestada"]],decls:1,vars:1,consts:[[3,"HeaderTitle","SearchKey"]],template:function(n,o){1&n&&(t.TgZ(0,"app-tools-manager-header",0),t.NdJ("SearchKey",function(a){return o.searchTool(a.keyword)}),t.qZA()),2&n&&t.Q6J("HeaderTitle","Herramientas prestadas")},directives:[C],styles:[""]}),e})(),Gt=(()=>{class e{constructor(){this.title="Herramientas da\xf1adas"}ngOnInit(){}searchTool(n){console.log(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-herramientas-rotas"]],decls:1,vars:1,consts:[[3,"HeaderTitle"]],template:function(n,o){1&n&&t._UZ(0,"app-tools-manager-header",0),2&n&&t.Q6J("HeaderTitle",o.title)},directives:[C],styles:[""]}),e})();const zt=function(e,i){return{"text-success":e,"text-danger":i}};function Vt(e,i){if(1&e&&(t.TgZ(0,"li",19),t.TgZ(1,"span",20),t._uU(2),t.qZA(),t.TgZ(3,"span",21),t._uU(4),t.qZA(),t.TgZ(5,"span",22),t._uU(6),t.qZA(),t.TgZ(7,"span",23),t._uU(8),t.qZA(),t.qZA()),2&e){const n=i.$implicit;t.xp6(2),t.AsE(" x",n.Cantidad," ",n.Cantidad>1?"unidades":"unidad"," "),t.xp6(1),t.Q6J("ngClass",t.WLB(6,zt,"Funcionando"===n.Estado,"Da\xf1ada"===n.Estado)),t.xp6(1),t.Oqu(n.Estado),t.xp6(2),t.Oqu(n.Ubicacion),t.xp6(2),t.Oqu(n.Fecha_Compra)}}function $t(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",3),t.TgZ(1,"div",4),t._UZ(2,"img",5),t.qZA(),t.TgZ(3,"div",6),t.TgZ(4,"div",7),t._uU(5),t.qZA(),t.TgZ(6,"div",8),t.TgZ(7,"span",9),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"div",10),t.TgZ(10,"ul",11),t.YNc(11,Vt,9,9,"li",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",13),t.TgZ(13,"button",14),t.NdJ("click",function(){const a=t.CHM(n).$implicit;return t.oxw().editTool(a._id)}),t._UZ(14,"i",15),t.qZA(),t.TgZ(15,"button",16),t._uU(16," P "),t.qZA(),t.TgZ(17,"button",17),t.NdJ("click",function(){const a=t.CHM(n).$implicit;return t.oxw().deleteTool(a._id)}),t._UZ(18,"i",18),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=i.$implicit,o=t.oxw();t.xp6(2),t.Q6J("src",o.Environment.server_uri+"/"+n.imgRef,t.LSH),t.xp6(3),t.hij(" ",n.Nombre," "),t.xp6(3),t.Oqu(n.Marca),t.xp6(3),t.Q6J("ngForOf",n.Stock)}}let Kt=(()=>{class e{constructor(n,o){this.ToolStore=n,this.Router=o,this.Tools={data:[],isEmpty:!0},this.Environment=_.N,this.ToolStore.Tool$.subscribe({next:r=>{this.Tools=r}})}ngOnInit(){}search(n){console.log(n)}editTool(n){console.log(n),this.Router.navigate(["stock","Gestionar-Herramientas","agregar-herramienta",n])}deleteTool(n){this.ToolStore.deleteTool(n)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(T.b),t.Y36(m.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-herramientas"]],decls:3,vars:2,consts:[[3,"HeaderTitle","SearchKey"],[1,"tool-list"],["class","card-tool",4,"ngFor","ngForOf"],[1,"card-tool"],[1,"card-tool-img"],["alt","...",1,"card-img-top",3,"src"],[1,"card-tool-body"],[1,"card-tool-title"],[1,"card-tool-brand"],[1,"badge","bg-success"],[1,"card-tool-description"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"card-tool-buttons"],["title","Editar herramienta",1,"btn","btn-outline-secondary","btn-sm","text-success",3,"click"],[1,"fas","fa-edit"],["title","Prestar herramienta",1,"btn","btn-outline-secondary","btn-sm","text-success"],["title","Eliminar herramienta",1,"btn","btn-outline-secondary","btn-sm","text-danger",3,"click"],[1,"fas","fa-trash"],[1,"list-group-item"],[1,"cantidad"],[3,"ngClass"],[1,"text-warning"],[1,"badge","bg-secondary"]],template:function(n,o){1&n&&(t.TgZ(0,"app-tools-manager-header",0),t.NdJ("SearchKey",function(a){return o.search(a.keyword)}),t.qZA(),t.TgZ(1,"div",1),t.YNc(2,$t,19,4,"div",2),t.qZA()),2&n&&(t.Q6J("HeaderTitle","Herramientas disponibles"),t.xp6(2),t.Q6J("ngForOf",o.Tools.data))},directives:[C,l.sg,l.mk],styles:["[_nghost-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1fr;grid-template-rows:max-content 1fr}.tool-list[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:repeat(auto-fill,minmax(min(22rem,100%),1fr));grid-auto-rows:max-content;padding:.5rem 0px;grid-gap:.5rem;gap:.5rem;overflow-y:auto}.tool-list[_ngcontent-%COMP%]   .card-tool[_ngcontent-%COMP%]{position:relative;display:grid;width:100%;height:100%;grid-template-columns:minmax(4rem,6rem) 1fr;grid-template-rows:100%;border:2px solid var(--bs-gray-200);border-radius:4px;padding:.2rem;grid-gap:.1rem;gap:.1rem;transition:.5s all;background-color:#fff}.tool-list[_ngcontent-%COMP%]   .card-tool[_ngcontent-%COMP%]:hover{border-color:var(--bs-gray-700)}.tool-list[_ngcontent-%COMP%]   .card-tool[_ngcontent-%COMP%]:hover   .card-tool-buttons[_ngcontent-%COMP%]{opacity:1}.tool-list[_ngcontent-%COMP%]   .card-tool[_ngcontent-%COMP%]   .card-tool-img[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;border-radius:10px;box-shadow:3px 0 5px var(--bs-gray-300);background-color:#fff}.tool-list[_ngcontent-%COMP%]   .card-tool[_ngcontent-%COMP%]   .card-tool-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:100%;object-fit:contain;border-radius:10px}.tool-list[_ngcontent-%COMP%]   .card-tool[_ngcontent-%COMP%]   .card-tool-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;border-radius:2px;padding:.3rem}.tool-list[_ngcontent-%COMP%]   .card-tool[_ngcontent-%COMP%]   .card-tool-body[_ngcontent-%COMP%]   .card-tool-title[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center;align-items:center;font-size:16px;text-align:center;-webkit-user-select:none;user-select:none}.tool-list[_ngcontent-%COMP%]   .card-tool[_ngcontent-%COMP%]   .card-tool-body[_ngcontent-%COMP%]   .card-tool-brand[_ngcontent-%COMP%]{display:flex;width:100%;padding:.2rem;gap:.2rem;justify-content:center;align-items:center;-webkit-user-select:none;user-select:none;font-size:16px}.tool-list[_ngcontent-%COMP%]   .card-tool[_ngcontent-%COMP%]   .card-tool-body[_ngcontent-%COMP%]   .card-tool-description[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.tool-list[_ngcontent-%COMP%]   .card-tool[_ngcontent-%COMP%]   .card-tool-body[_ngcontent-%COMP%]   .card-tool-description[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:var(--bs-gray-600);padding:0;-webkit-user-select:none;user-select:none}.tool-list[_ngcontent-%COMP%]   .card-tool[_ngcontent-%COMP%]   .card-tool-body[_ngcontent-%COMP%]   .card-tool-description[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;text-align:justify;flex-wrap:wrap;align-items:center;justify-content:space-around;padding:.5rem;gap:.2rem}.tool-list[_ngcontent-%COMP%]   .card-tool[_ngcontent-%COMP%]   .card-tool-buttons[_ngcontent-%COMP%]{position:absolute;right:0px;display:flex;height:100%;flex-direction:column;justify-content:center;align-items:center;background-color:var(--bs-gray-100);opacity:0;border-left:2px solid var(--bs-warning);border-radius:2px;padding:.3rem;transition:opacity .2s ease-in;gap:.3rem;box-shadow:-5px 0 8px #ccc}.tool-list[_ngcontent-%COMP%]   .card-tool[_ngcontent-%COMP%]   .card-tool-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.tool-list[_ngcontent-%COMP%]   .card-tool[_ngcontent-%COMP%]   .card-tool-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fff!important}"]}),e})();const Xt=function(e){return[e]};function Wt(e,i){if(1&e&&(t.TgZ(0,"a",4),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.Q6J("routerLink",t.VKq(2,Xt,n.routerLink)),t.xp6(1),t.Oqu(n.title)}}const tn=[{path:"",component:qt,children:[{path:"GestionInventario",component:wt},{path:"CrearInventario",component:x},{path:"CrearInventario/:_id",component:x},{path:"Gestionar-Herramientas",component:(()=>{class e{constructor(){this.sections=[{routerLink:"herramientas",title:"Herramientas"},{routerLink:"herramientas-prestadas",title:"Herramientas prestadas"},{routerLink:"herramientas-en-obra",title:"Herramientas en obra"},{routerLink:"herramientas-da\xf1adas",title:"Herramientas da\xf1adas"}]}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-tools-manager-page"]],decls:5,vars:1,consts:[[1,"sections"],[1,"list-group","list-group-horizontal"],["class","list-group-item list-group-item-action","routerLinkActive","active",3,"routerLink",4,"ngFor","ngForOf"],[1,"content-wrapper"],["routerLinkActive","active",1,"list-group-item","list-group-item-action",3,"routerLink"]],template:function(n,o){1&n&&(t.TgZ(0,"nav",0),t.TgZ(1,"div",1),t.YNc(2,Wt,2,4,"a",2),t.qZA(),t.qZA(),t.TgZ(3,"div",3),t._UZ(4,"router-outlet"),t.qZA()),2&n&&(t.xp6(2),t.Q6J("ngForOf",o.sections))},directives:[l.sg,m.yS,m.Od,m.lC],styles:["[_nghost-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:100%;grid-template-rows:max-content 1fr}.content-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;overflow-y:auto}nav.sections[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center;align-items:center;flex-direction:column;padding:.3rem;overflow-y:auto}@media (max-width: 768px){nav.sections[_ngcontent-%COMP%]{font-size:10px;align-items:flex-start}}nav.sections[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]{width:max-content;overflow:auto}nav.sections[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:max-content;height:max-content;padding:.2rem .5rem}"]}),e})(),children:[{path:"herramientas",component:Kt},{path:"herramientas-prestadas",component:Bt},{path:"herramientas-da\xf1adas",component:Gt},{path:"agregar-herramienta",component:M},{path:"agregar-herramienta/:_id",component:M},{path:"**",redirectTo:"herramientas",pathMatch:"full"}]},{path:"Reporte",component:Ht},{path:"**",redirectTo:"GestionInventario",pathMatch:"full"}]},{path:"**",redirectTo:""}];let nn=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.Bz.forChild(tn)],m.Bz]}),e})();var en=g(1752),on=g(4586);let rn=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[],imports:[[l.ez,P.JF,nn,c.UX,en.q,on.D]]}),e})()}}]);